(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[858],{858:(e,s,t)=>{"use strict";t.r(s),t.d(s,{AcceptMessage:()=>x,AcceptObserver:()=>O,ConnectMessage:()=>b,ConnectMessageObserver:()=>V,ConnectionRefusedError:()=>I,ErrorType:()=>w,ErrorTypeMap:()=>M,HandshakeMessage:()=>L,HandshakeObserver:()=>C,IncomingMessageType:()=>y,InvalidProviderError:()=>T,KeyReferrerMismatchError:()=>N,MP_SDK:()=>m,OutgoingMessageType:()=>f,RejectMessage:()=>B,RejectObserver:()=>R,connect:()=>j,version:()=>S});class n{constructor(e){this.messageReceiver=e}notify(e,s){this.messageReceiver.onMessageReceived(e,s)}}class r{constructor(){this.values={}}add(e,s){this.getValuesAtKey(e).push(s)}remove(e,s){const t=this.values[e];if(t){const e=t.indexOf(s);e>-1&&t.splice(e,1)}}removeKey(e){delete this.values[e]}getValuesAtKey(e){const s=this.values[e]||[];return this.values[e]=s,s}valuesPerKey(e){return this.getValuesAtKey(e).length}find(e,s){return this.values[e]&&this.values[e].find(s)}get keys(){return Object.keys(this.values)}hasKey(e){return e in this.values}has(e,s){return this.hasKey(e)&&this.values[e].includes(s)}*[Symbol.iterator](){for(const e in this.values)for(const s of this.values[e])yield[e,s]}}class i{listen(){}stopListening(){}send(){throw Error("The sdk has been disconnected and can't make any new calls")}}class o{constructor(e,s,t){this.sourceId=e,this.targetId=s,this.messageBridge=t,this.observers=new r}static toFilteredMessenger(e,s,t){const n=new c(e.sourceId,e.targetId,e,s);for(const s of t)for(const t of e.observers.getValuesAtKey(s))n.addObserver(t);return n}init(){const e=new class{constructor(e){this.messenger=e}onMessageReceived(e,s){this.messenger.onMessageReceived(e,s)}}(this),s=new n(e);this.messageBridge.listen(s)}dispose(){this.messageBridge.stopListening(),this.messageBridge=new i}addObserver(e){this.observers.add(e.messageType,e)}removeObserver(e){this.observers.remove(e.messageType,e)}send(e){const s=this.sourceId,t=this.targetId;this.messageBridge.send(Object.assign(Object.assign({},e),{fromId:s,toId:t,timestamp:Date.now()}))}onMessageReceived(e,s){if(!this.filterMessageId(e))return;const t=e.type,n=this.observers.getValuesAtKey(t);if(n)for(const t of n){const n=e.payload||e;t.notify(n,s,e.timestamp)}}filterMessageId(e){const s=e.toId,t=e.fromId;return s instanceof Array?s.indexOf(this.sourceId)>-1:(void 0===s||s===this.sourceId)&&t===this.targetId}}class c extends o{constructor(e,s,t,n){super(e,s,new i),this.messenger=t,this.sendFilter=n,this.errorBridge=new i}send(e){this.sendFilter.includes(e.type)?this.messenger.send(e):this.errorBridge.send()}}class a{constructor(e,s){this.sourceId=e,this.listenerBridge=s,this.observers=new r}init(){const e=new class{constructor(e){this.messenger=e}onMessageReceived(e,s){this.messenger.onMessageReceived(e,s)}}(this),s=new n(e);this.listenerBridge.listen(s)}dispose(){this.listenerBridge.stopListening()}addObserver(e){this.observers.add(e.messageType,e)}removeObserver(e){this.observers.remove(e.messageType,e)}send(e,s,t,n){t.send(Object.assign(Object.assign({},e),{fromId:this.sourceId,toId:s,timestamp:Date.now()}),n)}onMessageReceived(e,s){const t=e.type,n=this.observers.getValuesAtKey(t);if(n)for(const t of n){const n=e.payload||e;t.notify(n,s,e.timestamp)}}}class h{constructor(e){this.targetWindow=e,this.messageObserver=null,this.onMessage=e=>{if(this.messageObserver){const s=e.data;this.messageObserver.notify(Object.assign({},s),{id:s.fromId,origin:e.origin,source:e.source},e.data.timestamp)}}}listen(e){this.messageObserver||(this.messageObserver=e,this.targetWindow.addEventListener("message",this.onMessage))}stopListening(){this.targetWindow.removeEventListener("message",this.onMessage),this.messageObserver=null}}class d{constructor(e,s="*"){this.targetWindow=e,this.targetOrigin=s}send(e,s){this.targetWindow.postMessage(e,this.targetOrigin)}}class l{constructor(e,s,t="*"){this.sourceWindow=e,this.listener=new h(e),this.sender=new d(s,t)}listen(e){this.listener.listen(e)}stopListening(){this.listener.stopListening()}send(e){this.sender.send(e,this.sourceWindow)}}class u{constructor(e,s,t,n,r="*"){this.sourceId=e,this.sourceWindow=s,this.targetId=t,this.targetWindow=n,this.targetOrigin=r}createMessenger(){const e=new l(this.sourceWindow,this.targetWindow,this.targetOrigin);return new o(this.sourceId,this.targetId,e)}}var g=function(e,s,t,n){return new(t||(t=Promise))((function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var s;e.done?r(e.value):(s=e.value,s instanceof t?s:new t((function(e){e(s)}))).then(o,c)}a((n=n.apply(e,s||[])).next())}))};class v{constructor(){this.libraryCache=new Map}load(e,s){const t=this.libraryCache.get(e)||new p(e,s);return this.libraryCache.set(e,t),t.library}}class p{constructor(e,s){this._libraryPromise=new Promise(((e,s)=>{this.libraryResolver=e,this.libraryRejecter=s})),this.fetch(e,s)}fetch(e,s){return g(this,void 0,void 0,(function*(){try{const t=yield import(e),n=Object.assign({},t);if(s&&s in window){const e=window[s]||{};Object.assign(n,e),delete window[s]}this.libraryResolver(n)}catch(e){this.libraryRejecter(e)}}))}get library(){return this._libraryPromise}}var m,f,y,w,E=function(e,s,t,n){return new(t||(t=Promise))((function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var s;e.done?r(e.value):(s=e.value,s instanceof t?s:new t((function(e){e(s)}))).then(o,c)}a((n=n.apply(e,s||[])).next())}))};!function(e){const s=new v;e.connect=function(e,t,n){return E(this,void 0,void 0,(function*(){let r;try{r=yield e.connect()}finally{e.cancelConnecting()}const i=yield function(e){return E(this,void 0,void 0,(function*(){if(!e)throw new Error("Unabled to load the sdk");try{const t=yield s.load(e,"sdk-client");if(t&&t.SdkBuilder&&"function"==typeof t.SdkBuilder)return t.SdkBuilder}catch(e){}throw Error(`Could not load the sdk from ${e}`)}))}(r.scriptUrl),o=t.getFactory(r);return function(e,s,t,n){return new s(t,e).build(n)}(n,i,o,r.serializedInterface)}))}}(m||(m={})),function(e){e.CONNECT="postmessage.connect"}(f||(f={})),function(e){e.HANDSHAKE="postmessage.handshake",e.ACCEPT="postmessage.accept",e.REJECT="postmessage.reject"}(y||(y={}));class b{constructor(e,s={}){this.type=f.CONNECT,this.payload={bootstrapVersion:e,options:{auth:s.auth,provider:s.provider,sdkType:s.sdkType}}}}class C{constructor(e){this.receiver=e,this.messageType=y.HANDSHAKE}notify(e,s,t){this.receiver.handshake()}}class O{constructor(e){this.receiver=e,this.messageType=y.ACCEPT}notify(e,s,t){const{sourceId:n,scriptUrl:r,targetId:i,targetOrigin:o}=e,c=e.interface;this.receiver.accept(n,r,c,i,o)}}!function(e){e.CANCELLED="ConnectionCancelled",e.REFUSED="ConnectionRefused",e.INVALID_PROVIDER="InvalidProvider",e.KEY_MISMATCH="KeyReferrerMismatch"}(w||(w={}));class I extends Error{constructor(){super(),this.type=w.REFUSED,this.name="ConnectionRefusedError"}}class T extends Error{constructor(e){super(e),this.type=w.INVALID_PROVIDER,this.name="InvalidProviderError"}}class N extends Error{constructor(e){super(e),this.type=w.KEY_MISMATCH,this.name="KeyReferrerMismatchError"}}const M={[w.REFUSED]:I,[w.KEY_MISMATCH]:N,[w.INVALID_PROVIDER]:T};class R{constructor(e){this.receiver=e,this.messageType=y.REJECT}notify(e,s,t){const n=M[e.errorType];if(n){const s=new n(e.reason);this.receiver.reject(s)}}}class A extends Error{constructor(e){super(e),this.type=w.CANCELLED,this.name="ConnectionCancelledError"}}var D;!function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.HANDSHAKE=2]="HANDSHAKE",e[e.CONNECTED=3]="CONNECTED",e[e.REJECTED=4]="REJECTED"}(D||(D={}));class P{constructor(e,s,t){this.messenger=e,this.target=s,this.source=t,this.connectionState=D.IDLE,this.connectionPoll=void 0;const n=new class{constructor(e){this.connector=e}handshake(){this.connector.handshake()}accept(e,s,t,n,r){this.connector.accept(e,s,t,n,r)}reject(e){this.connector.reject(e)}}(this);this.handshakeObserver=new C(n),this.acceptObserver=new O(n),this.rejectObserver=new R(n),this.connectionPromise=new Promise(((e,s)=>{this.resolveConnection=e,this.rejectConnection=s}))}connect(e,s={}){return this.connectionState===D.IDLE&&(this.connectionState=D.CONNECTING,this.messenger.addObserver(this.handshakeObserver),this.messenger.addObserver(this.acceptObserver),this.messenger.addObserver(this.rejectObserver),this.connectionPoll=window.setInterval((()=>{this.messenger.send(new b(e,s),-1,this.target,this.source)}),500)),this.connectionPromise}cancelConnecting(){this.connectionState<D.CONNECTED&&(this.stopConnectPolling(),this.rejectConnection(new A("User manually cancelled connection")))}handshake(){this.connectionState<D.HANDSHAKE&&(this.connectionState=D.HANDSHAKE,this.stopConnectPolling(),this.messenger.removeObserver(this.handshakeObserver))}accept(e,s,t,n,r){this.connectionState<D.CONNECTED&&(this.connectionState=D.CONNECTED,this.messenger.removeObserver(this.handshakeObserver),this.messenger.removeObserver(this.acceptObserver),this.messenger.removeObserver(this.rejectObserver),this.stopConnectPolling(),this.resolveConnection({sourceId:e,targetId:n,targetOrigin:r,scriptUrl:s,serializedInterface:t}))}reject(e){this.connectionState<D.CONNECTED&&(this.connectionState=D.REJECTED,this.messenger.removeObserver(this.handshakeObserver),this.messenger.removeObserver(this.acceptObserver),this.messenger.removeObserver(this.rejectObserver),this.stopConnectPolling(),this.rejectConnection(e))}stopConnectPolling(){clearInterval(this.connectionPoll),this.connectionPoll=void 0}}var k=function(e,s,t,n){return new(t||(t=Promise))((function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var s;e.done?r(e.value):(s=e.value,s instanceof t?s:new t((function(e){e(s)}))).then(o,c)}a((n=n.apply(e,s||[])).next())}))};const S="3.0";function j(e,s={}){return k(this,void 0,void 0,(function*(){const t=(n=e).contentWindow?n.contentWindow:null;var n;if(!t)return Promise.reject("invalid window");const r=Math.floor(1e6*Math.random()),i=new h(window),o=new d(t),c=new a(r,i);c.init();const l=new P(c,o,window);return m.connect(new K(l,c,s),new H(t),window)}))}class K{constructor(e,s,t){this.connector=e,this.postMessage=s,this.options=t}connect(){return this.connector.connect(S,this.options)}cancelConnecting(){this.postMessage.dispose()}}class H{constructor(e){this.target=e}getFactory(e){return new u(e.sourceId,window,e.targetId,this.target,e.targetOrigin)}}class L{constructor(){this.type=y.HANDSHAKE,this.payload={}}}class x{constructor(e,s,t,n,r){this.type=y.ACCEPT,this.payload={scriptUrl:e,interface:s,sourceId:t,targetId:n,targetOrigin:r},this.interface=s}}class B{constructor(e){this.type=y.REJECT,this.payload={reason:e.message,errorType:e.type},this.reason=e.message}}class V{constructor(e){this.receiver=e,this.messageType=f.CONNECT}notify(e,s){this.receiver.onConnectionReceived(e,s)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvbWVzc2VuZ2Vycy9NZXNzZW5nZXIvQnJpZGdlT2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvdXRpbC9EaWN0QXJyYXkvRGljdEFycmF5LnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9tZXNzZW5nZXJzL2Vycm9ybWVzc2FnZS9FcnJvck1lc3NhZ2VCcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL21lc3NlbmdlcnMvTWVzc2VuZ2VyL01lc3Nlbmdlci50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvbWVzc2VuZ2Vycy9NZXNzZW5nZXIvVW5kaXJlY3RlZE1lc3Nlbmdlci50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvbWVzc2VuZ2Vycy9wb3N0bWVzc2FnZS9VbmRpcmVjdGVkUG9zdE1lc3NhZ2VCcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL21lc3NlbmdlcnMvcG9zdG1lc3NhZ2UvUG9zdE1lc3NhZ2VCcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL21lc3NlbmdlcnMvcG9zdG1lc3NhZ2UvUG9zdE1lc3NhZ2VGYWN0b3J5LnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL2R5bmFtaWMtbGliLWxvYWRlci9EeW5hbWljTGliTG9hZGVyLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL01QX1NESy50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9NZXNzYWdlVHlwZXMudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvRXJyb3JzL3R5cGUudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvTWVzc2FnZXMvQ29ubmVjdE1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvTWVzc2FnZU9ic2VydmVycy9IYW5kc2hha2VPYnNlcnZlci50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9NZXNzYWdlT2JzZXJ2ZXJzL0FjY2VwdE9ic2VydmVyLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL0Vycm9ycy9Db25uZWN0aW9uUmVmdXNlZC50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9FcnJvcnMvSW52YWxpZFByb3ZpZGVyLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL0Vycm9ycy9LZXlSZWZlcnJlck1pc21hdGNoLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL0Vycm9ycy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9NZXNzYWdlT2JzZXJ2ZXJzL1JlamVjdE9ic2VydmVyLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL0Vycm9ycy9DYW5jZWxsZWQudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvQ29ubmVjdG9yL2luZGV4LnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9tZXNzZW5nZXJzL01lc3Nlbmdlci9JTWVzc2VuZ2VyLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL01lc3NhZ2VzL0hhbmRzaGFrZU1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvTWVzc2FnZXMvQWNjZXB0TWVzc2FnZS50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9NZXNzYWdlcy9SZWplY3RNZXNzYWdlLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL01lc3NhZ2VPYnNlcnZlcnMvQ29ubmVjdE9ic2VydmVyLnRzIl0sIm5hbWVzIjpbIkJyaWRnZU9ic2VydmVyIiwibWVzc2FnZVJlY2VpdmVyIiwibWVzc2FnZSIsImNsaWVudEluZm8iLCJ0aGlzIiwib25NZXNzYWdlUmVjZWl2ZWQiLCJEaWN0QXJyYXkiLCJ2YWx1ZXMiLCJrZXkiLCJ2YWx1ZSIsImdldFZhbHVlc0F0S2V5IiwicHVzaCIsInZhbHVlc0F0S2V5IiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImxlbmd0aCIsInZhbEZpbmRlciIsImZpbmQiLCJPYmplY3QiLCJrZXlzIiwidmFsIiwiaGFzS2V5IiwiaW5jbHVkZXMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkVycm9yTWVzc2FnZUJyaWRnZSIsIkVycm9yIiwic291cmNlSWQiLCJ0YXJnZXRJZCIsIm1lc3NhZ2VCcmlkZ2UiLCJvYnNlcnZlcnMiLCJtZXNzZW5nZXIiLCJzZW5kRmlsdGVyIiwicmVjdkZpbHRlciIsImZpbHRlcmVkTWVzc2VuZ2VyIiwiRmlsdGVyZWRNZXNzZW5nZXIiLCJtc2dUeXBlIiwib2JzZXJ2ZXIiLCJhZGRPYnNlcnZlciIsIm1lc3NlbmdlckZhY2FkZSIsImJyaWRnZU9ic2VydmVyIiwibGlzdGVuIiwic3RvcExpc3RlbmluZyIsIm8iLCJhZGQiLCJtZXNzYWdlVHlwZSIsInJlbW92ZSIsImZyb21JZCIsInRvSWQiLCJzZW5kIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImZpbHRlck1lc3NhZ2VJZCIsInR5cGUiLCJtZXNzYWdlT2JzZXJ2ZXJzIiwicGF5bG9hZCIsIm5vdGlmeSIsIkFycmF5IiwidW5kZWZpbmVkIiwic3VwZXIiLCJlcnJvckJyaWRnZSIsIlVuZGlyZWN0ZWRNZXNzZW5nZXIiLCJsaXN0ZW5lckJyaWRnZSIsInRhcmdldCIsInNvdXJjZSIsIlBvc3RNZXNzYWdlTGlzdGVuZXIiLCJ0YXJnZXRXaW5kb3ciLCJtZXNzYWdlT2JzZXJ2ZXIiLCJvbk1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJpZCIsIm9yaWdpbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9zdE1lc3NhZ2VTZW5kZXIiLCJ0YXJnZXRPcmlnaW4iLCJfc291cmNlIiwicG9zdE1lc3NhZ2UiLCJQb3N0TWVzc2FnZUJyaWRnZSIsInNvdXJjZVdpbmRvdyIsImxpc3RlbmVyIiwic2VuZGVyIiwiUG9zdE1lc3NhZ2VGYWN0b3J5IiwicG9zdE1lc3NhZ2VCcmlkZ2UiLCJEeW5hbWljTGliTG9hZGVyIiwibGlicmFyeUNhY2hlIiwiTWFwIiwicGF0aCIsIndpbmRvd0tleSIsInNjcmlwdEZldGNoZXIiLCJnZXQiLCJTY3JpcHRGZXRjaGVyIiwic2V0IiwibGlicmFyeSIsIl9saWJyYXJ5UHJvbWlzZSIsIlByb21pc2UiLCJyZXMiLCJyZWoiLCJsaWJyYXJ5UmVzb2x2ZXIiLCJsaWJyYXJ5UmVqZWN0ZXIiLCJmZXRjaCIsIm1vZHVsZSIsImltcG9ydCIsImxpYiIsIndpbmRvdyIsImxpYk9iamVjdCIsImFzc2lnbiIsImUiLCJNUF9TREsiLCJPdXRnb2luZ01lc3NhZ2VUeXBlIiwiSW5jb21pbmdNZXNzYWdlVHlwZSIsIkVycm9yVHlwZSIsImxpYkxvYWRlciIsImNvbm5lY3QiLCJjb25uZWN0b3IiLCJmYWN0b3J5RmV0Y2hlciIsIndpbmRvd0NvbnRleHQiLCJjb25uZWN0UmVzcG9uc2UiLCJjYW5jZWxDb25uZWN0aW5nIiwiYnVpbGRlciIsInVybCIsInNka0NsaWVudCIsImxvYWQiLCJTZGtCdWlsZGVyIiwiZmV0Y2hTY3JpcHQiLCJzY3JpcHRVcmwiLCJtZXNzZW5nZXJGYWN0b3J5IiwiZ2V0RmFjdG9yeSIsInNka0J1aWxkZXIiLCJzZXJpYWxpemVkSW50ZXJmYWNlIiwiYnVpbGQiLCJidWlsZEludGVyZmFjZSIsIkNvbm5lY3RNZXNzYWdlIiwiYm9vdHN0cmFwVmVyc2lvbiIsIm9wdGlvbnMiLCJDT05ORUNUIiwiYXV0aCIsInByb3ZpZGVyIiwic2RrVHlwZSIsIkhhbmRzaGFrZU9ic2VydmVyIiwicmVjZWl2ZXIiLCJIQU5EU0hBS0UiLCJfaGFuZHNoYWtlIiwiX2NsaWVudEluZm8iLCJfdGltZXN0YW1wIiwiaGFuZHNoYWtlIiwiQWNjZXB0T2JzZXJ2ZXIiLCJBQ0NFUFQiLCJhY2NlcHQiLCJpbnRlcmZhY2UiLCJDb25uZWN0aW9uUmVmdXNlZEVycm9yIiwiUkVGVVNFRCIsIm5hbWUiLCJJbnZhbGlkUHJvdmlkZXJFcnJvciIsIklOVkFMSURfUFJPVklERVIiLCJLZXlSZWZlcnJlck1pc21hdGNoRXJyb3IiLCJLRVlfTUlTTUFUQ0giLCJFcnJvclR5cGVNYXAiLCJSZWplY3RPYnNlcnZlciIsIlJFSkVDVCIsInJlamVjdCIsImVycm9yVHlwZSIsImVycm9yIiwicmVhc29uIiwiQ29ubmVjdGlvbkNhbmNlbGxlZEVycm9yIiwiQ0FOQ0VMTEVEIiwiQ29ubmVjdGlvblN0YXRlIiwiQ29ubmVjdG9yIiwiY29ubmVjdGlvblN0YXRlIiwiSURMRSIsImNvbm5lY3Rpb25Qb2xsIiwiY29ubmVjdG9yRmFjYWRlIiwiaGFuZHNoYWtlT2JzZXJ2ZXIiLCJhY2NlcHRPYnNlcnZlciIsInJlamVjdE9ic2VydmVyIiwiY29ubmVjdGlvblByb21pc2UiLCJyZXNvbHZlQ29ubmVjdGlvbiIsInJlamVjdENvbm5lY3Rpb24iLCJ2ZXJzaW9uIiwiQ09OTkVDVElORyIsInNldEludGVydmFsIiwiQ09OTkVDVEVEIiwic3RvcENvbm5lY3RQb2xsaW5nIiwicmVtb3ZlT2JzZXJ2ZXIiLCJSRUpFQ1RFRCIsImNsZWFySW50ZXJ2YWwiLCJlbGVtZW50IiwiY29udGVudFdpbmRvdyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInBvc3RNZXNzYWdlTGlzdGVuZXIiLCJwb3N0TWVzYWdlU2VuZGVyIiwiaW5pdCIsIkVtYmVkQ29ubmVjdG9yIiwiRW1iZWRNZXNzZW5nZXJGYWN0b3J5RmV0Y2hlciIsImRpc3Bvc2UiLCJIYW5kc2hha2VNZXNzYWdlIiwiQWNjZXB0TWVzc2FnZSIsImNsaWVudEludGVyZmFjZSIsIlJlamVjdE1lc3NhZ2UiLCJDb25uZWN0TWVzc2FnZU9ic2VydmVyIiwib25Db25uZWN0aW9uUmVjZWl2ZWQiXSwibWFwcGluZ3MiOiI0ZkFXTyxNQUFNQSxFQUNYLFlBQW9CQyxHQUFBLEtBQUFBLGtCQUNiLE9BQU9DLEVBQXVFQyxHQUNuRkMsS0FBS0gsZ0JBQWdCSSxrQkFBa0JILEVBQVNDLElDWDdDLE1BQU1HLEVBQWIsY0FDVSxLQUFBQyxPQUF1QyxHQVF4QyxJQUFJQyxFQUFRQyxHQUNHTCxLQUFLTSxlQUFlRixHQUM1QkcsS0FBS0YsR0FTWixPQUFPRCxFQUFRQyxHQUNwQixNQUFNRyxFQUFjUixLQUFLRyxPQUFPQyxHQUNoQyxHQUFJSSxFQUFhLENBQ2YsTUFBTUMsRUFBTUQsRUFBWUUsUUFBUUwsR0FDNUJJLEdBQU8sR0FDVEQsRUFBWUcsT0FBT0YsRUFBSyxJQVN2QixVQUFVTCxVQUNSSixLQUFLRyxPQUFPQyxHQVNkLGVBQWVBLEdBQ3BCLE1BQU1JLEVBQWNSLEtBQUtHLE9BQU9DLElBQVEsR0FFeEMsT0FEQUosS0FBS0csT0FBT0MsR0FBT0ksRUFDWkEsRUFRRixhQUFhSixHQUNsQixPQUFPSixLQUFLTSxlQUFlRixHQUFLUSxPQUczQixLQUFLUixFQUFRUyxHQUNsQixPQUFPYixLQUFLRyxPQUFPQyxJQUFRSixLQUFLRyxPQUFPQyxHQUFLVSxLQUFLRCxHQU1uRCxXQUNFLE9BQU9FLE9BQU9DLEtBQUtoQixLQUFLRyxRQU9uQixPQUFPQyxHQUNaLE9BQU9BLEtBQU9KLEtBQUtHLE9BUWQsSUFBSUMsRUFBUWEsR0FDakIsT0FBT2pCLEtBQUtrQixPQUFPZCxJQUFRSixLQUFLRyxPQUFPQyxHQUFLZSxTQUFTRixHQU1oRCxFQUFFRyxPQUFPQyxZQUNkLElBQUssTUFBTWpCLEtBQU9KLEtBQUtHLE9BQ3JCLElBQUssTUFBTWMsS0FBT2pCLEtBQUtHLE9BQU9DLFFBQ3RCLENBQUNBLEVB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TUFBTWdKLEVBT1gsWUFBWXpFLEVBQW1CMEUsRUFBMEM5SyxFQUFrQkMsRUFBa0JpRCxHQU43RixLQUFBdkIsS0FBTzBELEVBQW9CcUMsT0FPekNsSixLQUFLcUQsUUFBVSxDQUNidUUsWUFDQXdCLFVBQVdrRCxFQUNYOUssV0FDQUMsV0FDQWlELGdCQUVGMUUsS0FBS29KLFVBQVlrRCxHQ2RkLE1BQU1DLEVBTVgsWUFBWXRDLEdBTEksS0FBQTlHLEtBQU8wRCxFQUFvQmlELE9BTXpDOUosS0FBS3FELFFBQVUsQ0FDYjZHLE9BQVFELEVBQU1uSyxRQUNka0ssVUFBV0MsRUFBTTlHLE1BRW5CbkQsS0FBS2tLLE9BQVNELEVBQU1uSyxTQ0RqQixNQUFNME0sRUFFWCxZQUFvQjdELEdBQUEsS0FBQUEsV0FESixLQUFBakcsWUFBY2tFLEVBQW9CMEIsUUFHM0MsT0FBT3RCLEVBQXlCakgsR0FDckNDLEtBQUsySSxTQUFTOEQscUJBQXFCekYsRUFBU2pIIiwiZmlsZSI6Ijg1OC5pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSU9ic2VydmVyLCBJQnJpZGdlTWVzc2FnZSB9IGZyb20gJy4vSU1lc3Nlbmdlcic7XG5pbXBvcnQgdHlwZSB7IEluZGV4S2V5IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBDbGllbnRJbmZvIH0gZnJvbSAnLi4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElNZXNzYWdlUmVjZWl2ZXI8SW5jb21pbmdEYXRhTWFwVD4ge1xuICBvbk1lc3NhZ2VSZWNlaXZlZChtZXNzYWdlOiBJQnJpZGdlTWVzc2FnZTxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4sIGNsaWVudEluZm86IENsaWVudEluZm8pOiB2b2lkO1xufVxuXG4vKipcbiAqIEFuIG9ic2VydmVyIHVzZWQgc3BlY2lmaWNhbGx5IGZvciBiaW5kaW5nIGFuIElNZXNzZW5nZXIgdG8gYW4gSU1lc3NlbmdlckJyaWRnZVxuICovXG5leHBvcnQgY2xhc3MgQnJpZGdlT2JzZXJ2ZXI8SW5jb21pbmdEYXRhTWFwVD4gaW1wbGVtZW50cyBJT2JzZXJ2ZXI8W0lCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPiwgQ2xpZW50SW5mb10+IHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtZXNzYWdlUmVjZWl2ZXI6IElNZXNzYWdlUmVjZWl2ZXI8SW5jb21pbmdEYXRhTWFwVD4pIHsgfVxuICBwdWJsaWMgbm90aWZ5KG1lc3NhZ2U6IElCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPiwgY2xpZW50SW5mbzogQ2xpZW50SW5mbyk6IHZvaWQge1xuICAgIHRoaXMubWVzc2FnZVJlY2VpdmVyLm9uTWVzc2FnZVJlY2VpdmVkKG1lc3NhZ2UsIGNsaWVudEluZm8pO1xuICB9XG59XG4iLCIvKipcbiAqIEEgZGljdGlvbmFyeSBsaWtlIG9iamVjdCBvZiBhcnJheXNcbiAqL1xuZXhwb3J0IGNsYXNzIERpY3RBcnJheTxLIGV4dGVuZHMgc3RyaW5nIHwgbnVtYmVyLCBWPiB7XG4gIHByaXZhdGUgdmFsdWVzOiBSZWNvcmQ8c3RyaW5nIHwgbnVtYmVyLCBWW10+ID0ge307XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBlbnRyeSB0byB0aGUgYXJyYXkgYXQgYGtleWBcbiAgICpcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICogQHBhcmFtIHtWfSB2YWx1ZVxuICAgKi9cbiAgcHVibGljIGFkZChrZXk6IEssIHZhbHVlOiBWKTogdm9pZCB7XG4gICAgY29uc3QgdmFsdWVzQXRLZXkgPSB0aGlzLmdldFZhbHVlc0F0S2V5KGtleSk7XG4gICAgdmFsdWVzQXRLZXkucHVzaCh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuIGVudHJ5IGZyb20gdGhlIGFycmF5IGF0IGBrZXlgXG4gICAqXG4gICAqIEBwYXJhbSB7S30ga2V5XG4gICAqIEBwYXJhbSB7Vn0gdmFsdWVcbiAgICovXG4gIHB1YmxpYyByZW1vdmUoa2V5OiBLLCB2YWx1ZTogVik6IHZvaWQge1xuICAgIGNvbnN0IHZhbHVlc0F0S2V5ID0gdGhpcy52YWx1ZXNba2V5XTtcbiAgICBpZiAodmFsdWVzQXRLZXkpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHZhbHVlc0F0S2V5LmluZGV4T2YodmFsdWUpO1xuICAgICAgaWYgKGlkeCA+IC0xKSB7XG4gICAgICAgIHZhbHVlc0F0S2V5LnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggYGtleWBcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICovXG4gIHB1YmxpYyByZW1vdmVLZXkoa2V5OiBLKTogdm9pZCB7XG4gICAgZGVsZXRlIHRoaXMudmFsdWVzW2tleV07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBhcnJheSBvZiB2YWx1ZXMgYXQgYGtleWBcbiAgICogV2lsbCBhbHdheXMgcmV0dXJuIGF0IGxlYXN0IGFuIGVtcHR5IGFycmF5XG4gICAqXG4gICAqIEBwYXJhbSB7S30ga2V5XG4gICAqL1xuICBwdWJsaWMgZ2V0VmFsdWVzQXRLZXkoa2V5OiBLKTogVltdIHtcbiAgICBjb25zdCB2YWx1ZXNBdEtleSA9IHRoaXMudmFsdWVzW2tleV0gfHwgW107XG4gICAgdGhpcy52YWx1ZXNba2V5XSA9IHZhbHVlc0F0S2V5O1xuICAgIHJldHVybiB2YWx1ZXNBdEtleSBhcyBWW107XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb3VudCBvZiB2YWx1ZXMgYXQgYGtleWBcbiAgICpcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICovXG4gIHB1YmxpYyB2YWx1ZXNQZXJLZXkoa2V5OiBLKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZXNBdEtleShrZXkpLmxlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBmaW5kKGtleTogSywgdmFsRmluZGVyOiAodmFsOiBWKSA9PiBib29sZWFuKTogViB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVzW2tleV0gJiYgdGhpcy52YWx1ZXNba2V5XS5maW5kKHZhbEZpbmRlcik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIGl0ZXJhdG9yIG92ZXIgdGhlIGtleXMgaW4gdGhpcyBgRGljdEFycmF5YFxuICAgKi9cbiAgcHVibGljIGdldCBrZXlzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy52YWx1ZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgaWYgYGtleWAgaXMgaW4gdGhpcyBgRGljdEFycmF5YFxuICAgKiBAcGFyYW0ge0t9IGtleVxuICAgKi9cbiAgcHVibGljIGhhc0tleShrZXk6IEspOiBib29sZWFuIHtcbiAgICByZXR1cm4ga2V5IGluIHRoaXMudmFsdWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgaWYgYSBrZXktdmFsdWUgcGFpciBpcyBpbiB0aGlzIGBEaWN0QXJyYXlgXG4gICAqIEBwYXJhbSB7S30ga2V5XG4gICAqIEBwYXJhbSB7Vn0gdmFsXG4gICAqL1xuICBwdWJsaWMgaGFzKGtleTogSywgdmFsOiBWKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaGFzS2V5KGtleSkgJiYgdGhpcy52YWx1ZXNba2V5XS5pbmNsdWRlcyh2YWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciBhbGwgdmFsdWVzIGluIHRoaXMgYERpY3RBcnJheWBcbiAgICovXG4gIHB1YmxpYyAqW1N5bWJvbC5pdGVyYXRvcl0oKTogSXRlcmFibGVJdGVyYXRvcjxbc3RyaW5nLCBWXT4ge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMudmFsdWVzKSB7XG4gICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLnZhbHVlc1trZXldKSB7XG4gICAgICAgIHlpZWxkIFtrZXksIHZhbF07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7IElNZXNzZW5nZXJCcmlkZ2UgfSBmcm9tICcuLi9NZXNzZW5nZXIvSU1lc3Nlbmdlcic7XG5cbi8qKlxuICogQWN0cyBhcyBhIE1lc3NlbmdlckJyaWRnZSBidXQgdGhyb3dzIGVycm9ycyBvbiBhbGwgb3V0Z29pbmcgY2FsbHMgYW5kIG5vLW9wcyBhbnkgaW5jb21pbmcgbWVzc2FnZXNcbiAqL1xuZXhwb3J0IGNsYXNzIEVycm9yTWVzc2FnZUJyaWRnZSBpbXBsZW1lbnRzIElNZXNzZW5nZXJCcmlkZ2U8dW5rbm93biwgdW5rbm93bj4ge1xuICAvKipcbiAgICogTm8tb3AgbGlzdGVuZXJcbiAgICovXG4gIHB1YmxpYyBsaXN0ZW4oKTogdm9pZCB7fVxuXG4gIC8qKlxuICAgKiBOby1vcCBzdG9wIHJlY2VpdmluZyBtZXNzYWdlXG4gICAqL1xuICBwdWJsaWMgc3RvcExpc3RlbmluZygpOiB2b2lkIHt9XG5cbiAgLyoqXG4gICAqIFRocm93IGVycm9ycyB3aGVuIGF0dGVtcHRpbmcgdG8gc2VuZCBtZXNzYWdlc1xuICAgKi9cbiAgcHVibGljIHNlbmQoKTogbmV2ZXIge1xuICAgIHRocm93IEVycm9yKCdUaGUgc2RrIGhhcyBiZWVuIGRpc2Nvbm5lY3RlZCBhbmQgY2FuXFwndCBtYWtlIGFueSBuZXcgY2FsbHMnKTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUge1xuICBJTWVzc2VuZ2VyLCBJTWVzc2VuZ2VyQnJpZGdlLFxuICBJTWVzc2FnZSwgSU1lc3NhZ2VPYnNlcnZlciwgSUJyaWRnZU1lc3NhZ2UsXG4gIENsaWVudEluZm8sXG59IGZyb20gJy4vSU1lc3Nlbmdlcic7XG5pbXBvcnQgeyBCcmlkZ2VPYnNlcnZlciB9IGZyb20gJy4vQnJpZGdlT2JzZXJ2ZXInO1xuaW1wb3J0IHsgRGljdEFycmF5IH0gZnJvbSAnQG1wL3V0aWwtZGljdGFycmF5JztcbmltcG9ydCB0eXBlIHsgSW5kZXhLZXkgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBFcnJvck1lc3NhZ2VCcmlkZ2UgfSBmcm9tICcuLi9lcnJvcm1lc3NhZ2UvRXJyb3JNZXNzYWdlQnJpZGdlJztcblxuLyoqXG4gKiBBIGJpLWRpcmVjdGlvbmFsIGNvbW11bmljYXRvciB0aGF0IGNhblxuICogLSByZWNlaXZlIG1lc3NhZ2Ugb2YgdHlwZSBga2V5b2YgSW5jb21pbmdEYXRhTWFwVGAgdmlhIG9ic2VydmVyc1xuICogLSBzZW5kIG1lc3NhZ2VzIG9mIHR5cGUgYGtleW9mIE91dGdvaW5nRGF0YU1hcFRgXG4gKiAtIGZpbHRlcnMgaW5jb21pbmcgbWVzc2FnZXMgYmFzZWQgb24gdGhlIGlkIG9mIHRoZSBjbGllbnQgYW5kIHRoZSBtZXNzYWdlJ3MgdGFyZ2V0XG4gKlxuICogVGhlIHVuZGVybHlpbmcgY29tbXVuaWNhdGlvbiBtZWNoYW5pc21zIGFyZSBkZWZpbmVkIGJ5IGFuIElNZXNzZW5nZXJCcmlkZ2UgcHJvdmlkZWQgYnkgdGhlIGNyZWF0b3JcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqIEBwYXJhbSBJbmNvbWluZ0RhdGFNYXBUIFRoZSBpbmNvbWluZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZCBieSByZWdpc3RlcmVkIG9ic2VydmVyc1xuICovXG5leHBvcnQgY2xhc3MgTWVzc2VuZ2VyPFxuICBPdXRnb2luZ0RhdGFNYXBULFxuICBJbmNvbWluZ0RhdGFNYXBULFxuPiBpbXBsZW1lbnRzIElNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4ge1xuXG4gIHByaXZhdGUgb2JzZXJ2ZXJzOiBEaWN0QXJyYXk8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIElNZXNzYWdlT2JzZXJ2ZXI8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+PiA9IG5ldyBEaWN0QXJyYXkoKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNvdXJjZUlkOiBudW1iZXIsIHByaXZhdGUgdGFyZ2V0SWQ6IG51bWJlciwgcHJpdmF0ZSBtZXNzYWdlQnJpZGdlOiBJTWVzc2VuZ2VyQnJpZGdlPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+KSB7IH1cblxuICAvKipcbiAgICogQ2xvbmUgdGhpcyBNZXNzZW5nZXIgYXMgYW4gSU1lc3NlbmdlciB0aGF0IHdpbGwgb25seSBzZW5kIGFuZCByZWNlaXZlIGNlcnRhaW4gdHlwZXMgb2YgbWVzc2FnZXNcbiAgICogQHBhcmFtIG1lc3NlbmdlclxuICAgKiBAcGFyYW0gc2VuZEZpbHRlclxuICAgKiBAcGFyYW0gcmVjdkZpbHRlclxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyB0b0ZpbHRlcmVkTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+KFxuICAgIG1lc3NlbmdlcjogTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+LFxuICAgIHNlbmRGaWx0ZXI6IEFycmF5PEluZGV4S2V5PE91dGdvaW5nRGF0YU1hcFQ+PixcbiAgICByZWN2RmlsdGVyOiBBcnJheTxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPj4sXG4gICk6IElNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4ge1xuICAgIGNvbnN0IGZpbHRlcmVkTWVzc2VuZ2VyID0gbmV3IEZpbHRlcmVkTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+KG1lc3Nlbmdlci5zb3VyY2VJZCwgbWVzc2VuZ2VyLnRhcmdldElkLCBtZXNzZW5nZXIsIHNlbmRGaWx0ZXIpO1xuICAgIGZvciAoY29uc3QgbXNnVHlwZSBvZiByZWN2RmlsdGVyKSB7XG4gICAgICBmb3IgKGNvbnN0IG9ic2VydmVyIG9mIG1lc3Nlbmdlci5vYnNlcnZlcnMuZ2V0VmFsdWVzQXRLZXkobXNnVHlwZSkpIHtcbiAgICAgICAgZmlsdGVyZWRNZXNzZW5nZXIuYWRkT2JzZXJ2ZXIob2JzZXJ2ZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJlZE1lc3NlbmdlcjtcbiAgfVxuICAvKipcbiAgICogU3RhcnQgbGlzdGVuaW5nIGZvciBhbnkgaW5jb21pbmcgbWVzc2FnZXMgdmlhIHRoZSBgbWVzc2FnZUJyaWRnZWBcbiAgICovXG4gIHB1YmxpYyBpbml0KCk6IHZvaWQge1xuICAgIGNsYXNzIE1lc3NlbmdlckZhY2FkZSB7XG4gICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1lc3NlbmdlcjogTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+KSB7fVxuICAgICAgcHVibGljIG9uTWVzc2FnZVJlY2VpdmVkKG1lc3NhZ2U6IElCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPiwgY2xpZW50SW5mbzogQ2xpZW50SW5mbykge1xuICAgICAgICB0aGlzLm1lc3Nlbmdlci5vbk1lc3NhZ2VSZWNlaXZlZChtZXNzYWdlLCBjbGllbnRJbmZvKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtZXNzZW5nZXJGYWNhZGUgPSBuZXcgTWVzc2VuZ2VyRmFjYWRlKHRoaXMpO1xuICAgIGNvbnN0IGJyaWRnZU9ic2VydmVyID0gbmV3IEJyaWRnZU9ic2VydmVyKG1lc3NlbmdlckZhY2FkZSk7XG4gICAgdGhpcy5tZXNzYWdlQnJpZGdlLmxpc3RlbihicmlkZ2VPYnNlcnZlcik7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzIGFuZCBjbGVhbiB1cCB0aGlzIE1lc3NlbmdlclxuICAgKi9cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5tZXNzYWdlQnJpZGdlLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICB0aGlzLm1lc3NhZ2VCcmlkZ2UgPSBuZXcgRXJyb3JNZXNzYWdlQnJpZGdlKCk7XG4gIH1cblxuICAvKipcbiAgICogT2JzZXJ2ZSBpbmNvbWluZyBtZXNzYWdlc1xuICAgKlxuICAgKiBAcGFyYW0gb2JzZXJ2ZXJcbiAgICovXG4gIHB1YmxpYyBhZGRPYnNlcnZlcihvOiBJTWVzc2FnZU9ic2VydmVyPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPik6IHZvaWQge1xuICAgIHRoaXMub2JzZXJ2ZXJzLmFkZChvLm1lc3NhZ2VUeXBlLCBvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGFuIG9ic2VydmVyIGZyb20gcmVjZWl2aW5nIG1lc3NhZ2VzXG4gICAqXG4gICAqIEBwYXJhbSBvYnNlcnZlclxuICAgKi9cbiAgcHVibGljIHJlbW92ZU9ic2VydmVyKG86IElNZXNzYWdlT2JzZXJ2ZXI8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vYnNlcnZlcnMucmVtb3ZlKG8ubWVzc2FnZVR5cGUsIG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBgbWVzc2FnZWAgdG8gdGhlIGB0YXJnZXRgIG9mIHRoZSBgSU1lc3NlbmdlckJyaWRnZWBcbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICovXG4gIHB1YmxpYyBzZW5kKG1lc3NhZ2U6IElNZXNzYWdlPEluZGV4S2V5PE91dGdvaW5nRGF0YU1hcFQ+LCBPdXRnb2luZ0RhdGFNYXBUPik6IHZvaWQge1xuICAgIGNvbnN0IGZyb21JZCA9IHRoaXMuc291cmNlSWQ7XG4gICAgY29uc3QgdG9JZCA9IHRoaXMudGFyZ2V0SWQ7XG4gICAgdGhpcy5tZXNzYWdlQnJpZGdlLnNlbmQoe1xuICAgICAgLi4ubWVzc2FnZSxcbiAgICAgIGZyb21JZCxcbiAgICAgIHRvSWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTm90aWZ5IGFsbCBvYnNlcnZlcnMgb2YgYG1lc3NhZ2UudHlwZWAgb2YgdGhlIGluY29taW5nIGBtZXNzYWdlYCBhZnRlciBhbnkgZmlsdGVyaW5nIG91dCBtZXNzYWdlcyBub3QgbWVhbnQgZm9yIHRoaXMgTWVzc2VuZ2VyXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlXG4gICAqL1xuICBwcml2YXRlIG9uTWVzc2FnZVJlY2VpdmVkKG1lc3NhZ2U6IElCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPiwgY2xpZW50SW5mbzogQ2xpZW50SW5mbykge1xuICAgIGlmICghdGhpcy5maWx0ZXJNZXNzYWdlSWQobWVzc2FnZSkpIHJldHVybjtcblxuICAgIGNvbnN0IG1lc3NhZ2VUeXBlID0gbWVzc2FnZS50eXBlO1xuICAgIGNvbnN0IG1lc3NhZ2VPYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycy5nZXRWYWx1ZXNBdEtleShtZXNzYWdlVHlwZSk7XG4gICAgaWYgKG1lc3NhZ2VPYnNlcnZlcnMpIHtcbiAgICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgbWVzc2FnZU9ic2VydmVycykge1xuICAgICAgICAvLyBUT0RPIChzZGsgMS54IHN1cHBvcnQpOiBTREsgYm9vdHN0cmFwIDEueCBwdXQgdGhlIHBheWxvYWQgYXQgdGhlIHJvb3Qgb2YgdGhlIG1lc3NhZ2UsIG5vdCB1bmRlciB0aGUgYHBheWxvYWRgIHByb3BlcnR5XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBtZXNzYWdlLnBheWxvYWQgfHwgbWVzc2FnZSBhcyB1bmtub3duIGFzIEluY29taW5nRGF0YU1hcFRbRXhjbHVkZTxrZXlvZiBJbmNvbWluZ0RhdGFNYXBULCBzeW1ib2w+XTtcbiAgICAgICAgb2JzZXJ2ZXIubm90aWZ5KHBheWxvYWQsIGNsaWVudEluZm8sIG1lc3NhZ2UudGltZXN0YW1wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHdoZXRoZXIgYG1lc3NhZ2VgIGlzIG1lYW50IGZvciB0aGlzIE1lc3NlbmdlciBhbmQgY29tZXMgZnJvbSBhIGtub3duIHRhcmdldFxuICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgKi9cbiAgcHJpdmF0ZSBmaWx0ZXJNZXNzYWdlSWQobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+KTogYm9vbGVhbiB7XG4gICAgY29uc3QgdG9JZCA9IG1lc3NhZ2UudG9JZDtcbiAgICBjb25zdCBmcm9tSWQgPSBtZXNzYWdlLmZyb21JZDtcbiAgICBpZiAodG9JZCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICByZXR1cm4gdG9JZC5pbmRleE9mKHRoaXMuc291cmNlSWQpID4gLTE7XG4gICAgfVxuXG4gICAgLy8gVE9ETyAoc2RrIDEueCBzdXBwb3J0KTogU0RLIGJvb3RzdHJhcCAxLnggaGFkIGB0b0lkYCBhcyB1bmRlZmluZWQgZm9yIG1lc3NhZ2VzXG4gICAgcmV0dXJuICh0b0lkID09PSB1bmRlZmluZWQgfHwgdG9JZCA9PT0gdGhpcy5zb3VyY2VJZCkgJiYgZnJvbUlkID09PSB0aGlzLnRhcmdldElkO1xuICB9XG59XG5cbi8qKlxuICogQSBkZWNvcmF0ZWQgSU1lc3NlbmdlciB0aGF0IG9ubHkgc2VuZHMgbWVzc2FnZXMgZnJvbSBhIHByZWRlZmluZWQgc2V0IG9mIG1lc3NhZ2UgdHlwZXMgYW5kIGVycm9ycyBvbiBvdGhlcnMuXG4gKi9cbmNsYXNzIEZpbHRlcmVkTWVzc2VuZ2VyPFxuICBPdXRnb2luZ0RhdGFNYXBULFxuICBJbmNvbWluZ0RhdGFNYXBUXG4+IGV4dGVuZHMgTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+IHtcbiAgcHJpdmF0ZSBlcnJvckJyaWRnZTogRXJyb3JNZXNzYWdlQnJpZGdlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHNvdXJjZUlkOiBudW1iZXIsXG4gICAgdGFyZ2V0SWQ6IG51bWJlcixcbiAgICBwcml2YXRlIG1lc3NlbmdlcjogSU1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPixcbiAgICBwcml2YXRlIHNlbmRGaWx0ZXI6IEFycmF5PEluZGV4S2V5PE91dGdvaW5nRGF0YU1hcFQ+PixcbiAgKSB7XG4gICAgLy8gVE9ETyAoQG1wL3Nkayk6IHNvbWV0aGluZyBhYm91dCB0aGUgdHNjb25maWcgaW4gQG1wL3NkayByZXF1aXJlcyBgc3VwZXJgIHRvIGJlIGNhbGxlZCBmaXJzdCBzbyB0aGUgYG5ldyBFcnJvck1lc3NhZ2VCcmlkZ2VgIGNhbid0IGJlIHNoYXJlZFxuICAgIHN1cGVyKHNvdXJjZUlkLCB0YXJnZXRJZCwgbmV3IEVycm9yTWVzc2FnZUJyaWRnZSgpKTtcbiAgICB0aGlzLmVycm9yQnJpZGdlID0gbmV3IEVycm9yTWVzc2FnZUJyaWRnZSgpO1xuICB9XG5cbiAgcHVibGljIHNlbmQobWVzc2FnZTogSU1lc3NhZ2U8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4sIE91dGdvaW5nRGF0YU1hcFQ+KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VuZEZpbHRlci5pbmNsdWRlcyhtZXNzYWdlLnR5cGUpKSB7XG4gICAgICB0aGlzLm1lc3Nlbmdlci5zZW5kKG1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVycm9yQnJpZGdlLnNlbmQoKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB0eXBlIHtcbiAgSVVuZGlyZWN0ZWRNZXNzZW5nZXIsIElVbmRpcmVjdGVkTWVzc2VuZ2VyTGlzdGVuZXIsIElVbmRpcmVjdGVkTWVzc2VuZ2VyU2VuZGVyLFxuICBJTWVzc2FnZSwgSU1lc3NhZ2VPYnNlcnZlciwgSUJyaWRnZU1lc3NhZ2UsXG4gIENsaWVudEluZm8sXG59IGZyb20gJy4vSU1lc3Nlbmdlcic7XG5pbXBvcnQgeyBCcmlkZ2VPYnNlcnZlciB9IGZyb20gJy4vQnJpZGdlT2JzZXJ2ZXInO1xuaW1wb3J0IHsgRGljdEFycmF5IH0gZnJvbSAnQG1wL3V0aWwtZGljdGFycmF5JztcbmltcG9ydCB0eXBlIHsgSW5kZXhLZXkgfSBmcm9tICcuLi90eXBlcyc7XG5cbi8qKlxuICogQSBiaS1kaXJlY3Rpb25hbCBjb21tdW5pY2F0b3IgdGhhdCBjYW5cbiAqIC0gb3Blbmx5IHJlY2VpdmUgbWVzc2FnZXMgb2YgdHlwZSBga2V5b2YgSW5jb21pbmdEYXRhTWFwVGAgdmlhIG9ic2VydmVycyBmcm9tIHVuc3BlY2lmaWVkIHNvdXJjZXNcbiAqIC0gc2VuZCBtZXNzYWdlcyBvZiB0eXBlIGBrZXlvZiBPdXRnb2luZ0RhdGFNYXBUYCB0byB0YXJnZXRzIHNwZWNpZmllZCB3aGVuIHNlbmRpbmdcbiAqXG4gKiAqKkRpZmZlcnMgZnJvbSBhIHN0YW5kYXJkIGBJTWVzc2VuZ2VyYCBpbiB0aGF0IGl0IGRvZXNuJ3Qga25vdyBpdCdzIGNvbW11bmljYXRpb24gdGFyZ2V0IGF0IGNvbnN0cnVjdGlvbiB0aW1lKipcbiAqXG4gKiBUaGUgdW5kZXJseWluZyBjb21tdW5pY2F0aW9uIG1lY2hhbmlzbXMgYXJlIGRlZmluZWQgYnkgYW4gYElVbmRpcmVjdGVkTWVzc2VuZ2VyTGlzdGVuZXJgIHByb3ZpZGVkIGluIHRoZSBjb25zdHJ1Y3RvclxuICogYW5kIGJ5IHRoZSBgSVVuZGlyZWN0ZWRNZXNzZW5nZXJTZW5kZXJgIHByb3ZpZGVkIGluIHNlbmRcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqIEBwYXJhbSBJbmNvbWluZ0RhdGFNYXBUIFRoZSBpbmNvbWluZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZCBieSByZWdpc3RlcmVkIG9ic2VydmVyc1xuICovXG5leHBvcnQgY2xhc3MgVW5kaXJlY3RlZE1lc3NlbmdlcjxcbiAgT3V0Z29pbmdEYXRhTWFwVCxcbiAgSW5jb21pbmdEYXRhTWFwVCxcbiAgU291cmNlVCxcbj4gaW1wbGVtZW50cyBJVW5kaXJlY3RlZE1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBULCBTb3VyY2VUPiB7XG5cbiAgcHJpdmF0ZSBvYnNlcnZlcnM6IERpY3RBcnJheTxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSU1lc3NhZ2VPYnNlcnZlcjxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4+ID0gbmV3IERpY3RBcnJheSgpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc291cmNlSWQ6IG51bWJlciwgcHJpdmF0ZSBsaXN0ZW5lckJyaWRnZTogSVVuZGlyZWN0ZWRNZXNzZW5nZXJMaXN0ZW5lcjxJbmNvbWluZ0RhdGFNYXBUPikgeyB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGxpc3RlbmluZyBmb3IgYW55IGluY29taW5nIG1lc3NhZ2VzIHZpYSB0aGUgYGxpc3RlbmVyQnJpZGdlYFxuICAgKi9cbiAgcHVibGljIGluaXQoKTogdm9pZCB7XG4gICAgY2xhc3MgVW5kaXJlY3RlZEZhY2FkZSB7XG4gICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1lc3NlbmdlcjogVW5kaXJlY3RlZE1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBULCBTb3VyY2VUPikge31cbiAgICAgIHB1YmxpYyBvbk1lc3NhZ2VSZWNlaXZlZChtZXNzYWdlOiBJQnJpZGdlTWVzc2FnZTxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4sIGNsaWVudEluZm86IENsaWVudEluZm8pIHtcbiAgICAgICAgdGhpcy5tZXNzZW5nZXIub25NZXNzYWdlUmVjZWl2ZWQobWVzc2FnZSwgY2xpZW50SW5mbyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2VuZ2VyRmFjYWRlID0gbmV3IFVuZGlyZWN0ZWRGYWNhZGUodGhpcyk7XG4gICAgY29uc3QgYnJpZGdlT2JzZXJ2ZXIgPSBuZXcgQnJpZGdlT2JzZXJ2ZXIobWVzc2VuZ2VyRmFjYWRlKTtcbiAgICB0aGlzLmxpc3RlbmVyQnJpZGdlLmxpc3RlbihicmlkZ2VPYnNlcnZlcik7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzIGFuZCBjbGVhbiB1cCB0aGlzIFVuZGlyZWN0ZWRNZXNzZW5nZXJcbiAgICovXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXJCcmlkZ2Uuc3RvcExpc3RlbmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9ic2VydmUgaW5jb21pbmcgbWVzc2FnZXNcbiAgICpcbiAgICogQHBhcmFtIG9ic2VydmVyXG4gICAqL1xuICBwdWJsaWMgYWRkT2JzZXJ2ZXIob2JzZXJ2ZXI6IElNZXNzYWdlT2JzZXJ2ZXI8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vYnNlcnZlcnMuYWRkKG9ic2VydmVyLm1lc3NhZ2VUeXBlLCBvYnNlcnZlcik7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBhbiBvYnNlcnZlciBmcm9tIHJlY2VpdmluZyBtZXNzYWdlc1xuICAgKlxuICAgKiBAcGFyYW0gb2JzZXJ2ZXJcbiAgICovXG4gIHB1YmxpYyByZW1vdmVPYnNlcnZlcihvYnNlcnZlcjogSU1lc3NhZ2VPYnNlcnZlcjxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4pOiB2b2lkIHtcbiAgICB0aGlzLm9ic2VydmVycy5yZW1vdmUob2JzZXJ2ZXIubWVzc2FnZVR5cGUsIG9ic2VydmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGEgYG1lc3NhZ2VgIHRvIHRoZSBgdGFyZ2V0YFxuICAgKlxuICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgKiBAcGFyYW0gdGFyZ2V0SWRcbiAgICogQHBhcmFtIHRhcmdldFxuICAgKi9cbiAgcHVibGljIHNlbmQoXG4gICAgbWVzc2FnZTogSU1lc3NhZ2U8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4sIE91dGdvaW5nRGF0YU1hcFQ+LFxuICAgIHRhcmdldElkOiBudW1iZXIsXG4gICAgdGFyZ2V0OiBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlcjxPdXRnb2luZ0RhdGFNYXBULCB1bmtub3duPixcbiAgICBzb3VyY2U6IFNvdXJjZVQsXG4gICk6IHZvaWQge1xuICAgIHRhcmdldC5zZW5kKHtcbiAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICBmcm9tSWQ6IHRoaXMuc291cmNlSWQsXG4gICAgICB0b0lkOiB0YXJnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmeSBhbGwgb2JzZXJ2ZXJzIG9mIGBtZXNzYWdlLnR5cGVgIG9mIHRoZSBpbmNvbWluZyBgbWVzc2FnZWBcbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICovXG4gIHByaXZhdGUgb25NZXNzYWdlUmVjZWl2ZWQobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+LCBjbGllbnRJbmZvOiBDbGllbnRJbmZvKTogdm9pZCB7XG4gICAgY29uc3QgbWVzc2FnZVR5cGUgPSBtZXNzYWdlLnR5cGU7XG4gICAgY29uc3QgbWVzc2FnZU9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLmdldFZhbHVlc0F0S2V5KG1lc3NhZ2VUeXBlKTtcbiAgICBpZiAobWVzc2FnZU9ic2VydmVycykge1xuICAgICAgZm9yIChjb25zdCBvYnNlcnZlciBvZiBtZXNzYWdlT2JzZXJ2ZXJzKSB7XG4gICAgICAgIC8vIFRPRE8gKHNkayAxLnggc3VwcG9ydCk6IFNESyBCb29zdHJhcCAxLnggcHV0IHRoZSBwYXlsb2FkIGF0IHRoZSByb290IG9mIHRoZSBtZXNzYWdlXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBtZXNzYWdlLnBheWxvYWQgfHwgbWVzc2FnZSBhcyB1bmtub3duIGFzIEluY29taW5nRGF0YU1hcFRbRXhjbHVkZTxrZXlvZiBJbmNvbWluZ0RhdGFNYXBULCBzeW1ib2w+XTtcbiAgICAgICAgb2JzZXJ2ZXIubm90aWZ5KHBheWxvYWQsIGNsaWVudEluZm8sIG1lc3NhZ2UudGltZXN0YW1wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB0eXBlIHsgUG9zdE1lc3NhZ2VDbGllbnRJbmZvIH0gZnJvbSAnLi9Qb3N0TWVzc2FnZUNsaWVudEluZm8nO1xuaW1wb3J0IHR5cGUgeyBJVW5kaXJlY3RlZE1lc3Nlbmdlckxpc3RlbmVyLCBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlciwgSU9ic2VydmVyLCBJQnJpZGdlTWVzc2FnZSwgSU1lc3NhZ2UgfSBmcm9tICcuLi9NZXNzZW5nZXIvSU1lc3Nlbmdlcic7XG5cbi8qKlxuICogQnJpZGdlcyBhbmQgYWJzdHJhY3RzIGEgd2luZG93IGFuZCBpdHMgYWRkRXZlbnRMaXN0ZW5lciBmdW5jdGlvbiB0byByZWNlaXZlIGBtZXNzYWdlYCBldmVudHNcbiAqXG4gKiBAcGFyYW0gSW5jb21pbmdEYXRhTWFwVCBUaGUgaW5jb21pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqL1xuZXhwb3J0IGNsYXNzIFBvc3RNZXNzYWdlTGlzdGVuZXI8XG4gIEluY29taW5nRGF0YU1hcFQsXG4+IGltcGxlbWVudHMgSVVuZGlyZWN0ZWRNZXNzZW5nZXJMaXN0ZW5lcjxJbmNvbWluZ0RhdGFNYXBUPiB7XG4gIHByaXZhdGUgbWVzc2FnZU9ic2VydmVyOiBJT2JzZXJ2ZXI8W0lNZXNzYWdlPGtleW9mIEluY29taW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+LCBQb3N0TWVzc2FnZUNsaWVudEluZm8sIG51bWJlcl0+IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgb25NZXNzYWdlOiAoZXZlbnQ6IE1lc3NhZ2VFdmVudCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRhcmdldFdpbmRvdzogV2luZG93KSB7XG4gICAgLy8gc2V0IHVwIGEgY2FsbGJhY2sgdG8gdXNlIGluIGB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcmAgdGhhdCB3aWxsIHRyaWdnZXIgdGhlIHJlZ2lzdGVyZWQgb2JzZXJ2ZXJzXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSAoZXZlbnQ6IE1lc3NhZ2VFdmVudDxJQnJpZGdlTWVzc2FnZTxrZXlvZiBJbmNvbWluZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPj4pID0+IHtcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2VPYnNlcnZlcikge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgdGhpcy5tZXNzYWdlT2JzZXJ2ZXIubm90aWZ5KHtcbiAgICAgICAgICAvLyBUaGlzIHNwcmVhZCBpcyBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpbGl0eSB3aXRoIG1lc3NlbmdlcnMgY29tcGlsZWQgaW50byBvbGRlciBzZGsgYm9vdHN0cmFwcy4uLiBzdWNrc1xuICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBpZDogbWVzc2FnZS5mcm9tSWQsXG4gICAgICAgICAgb3JpZ2luOiBldmVudC5vcmlnaW4sXG4gICAgICAgICAgc291cmNlOiBldmVudC5zb3VyY2UgYXMgV2luZG93LFxuICAgICAgICB9LCBldmVudC5kYXRhLnRpbWVzdGFtcCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCByZWNlaXZpbmcgbWVzc2FnZSBldmVudHMgZnJvbSBwb3N0TWVzc2FnZVxuICAgKlxuICAgKiBAcGFyYW0gb2JzZXJ2ZXJcbiAgICovXG4gIHB1YmxpYyBsaXN0ZW4ob2JzZXJ2ZXI6IElPYnNlcnZlcjxbSU1lc3NhZ2U8a2V5b2YgSW5jb21pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4sIFBvc3RNZXNzYWdlQ2xpZW50SW5mb10+KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VPYnNlcnZlcikge1xuICAgICAgdGhpcy5tZXNzYWdlT2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMudGFyZ2V0V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm9uTWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgcmVjZWl2aW5nIG1lc3NhZ2UgZXZlbnRzIGZyb20gcG9zdE1lc3NhZ2VcbiAgICovXG4gIHB1YmxpYyBzdG9wTGlzdGVuaW5nKCk6IHZvaWQge1xuICAgIHRoaXMudGFyZ2V0V2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm9uTWVzc2FnZSk7XG4gICAgdGhpcy5tZXNzYWdlT2JzZXJ2ZXIgPSBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQnJpZGdlcyBhbmQgYWJzdHJhY3RzIGEgd2luZG93IGFuZCBpdHMgcG9zdE1lc3NhZ2UgZnVuY3Rpb24gdG8gc2VuZCBtZXNzYWdlc1xuICpcbiAqIEBwYXJhbSBPdXRnb2luZ0RhdGFNYXBUIFRoZSBvdXRnb2luZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICovXG5leHBvcnQgY2xhc3MgUG9zdE1lc3NhZ2VTZW5kZXI8XG4gIE91dGdvaW5nRGF0YU1hcFQsXG4+IGltcGxlbWVudHMgSVVuZGlyZWN0ZWRNZXNzZW5nZXJTZW5kZXI8T3V0Z29pbmdEYXRhTWFwVCwgV2luZG93PiB7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB0YXJnZXRXaW5kb3c6IFdpbmRvdywgcHJpdmF0ZSB0YXJnZXRPcmlnaW46IHN0cmluZyA9ICcqJykgeyB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBtZXNzYWdlIG92ZXIgcG9zdE1lc3NhZ2UgdG8gdGhlIGB0YXJnZXRXaW5kb3dgXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlXG4gICAqL1xuICBwdWJsaWMgc2VuZChtZXNzYWdlOiBJQnJpZGdlTWVzc2FnZTxrZXlvZiBPdXRnb2luZ0RhdGFNYXBULCBPdXRnb2luZ0RhdGFNYXBUPiwgX3NvdXJjZTogV2luZG93KTogdm9pZCB7XG4gICAgdGhpcy50YXJnZXRXaW5kb3cucG9zdE1lc3NhZ2UobWVzc2FnZSwgdGhpcy50YXJnZXRPcmlnaW4pO1xuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7IElNZXNzZW5nZXJCcmlkZ2UsIElNZXNzYWdlLCBJT2JzZXJ2ZXIsIElCcmlkZ2VNZXNzYWdlLCBJVW5kaXJlY3RlZE1lc3Nlbmdlckxpc3RlbmVyLCBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlciB9IGZyb20gJy4uL01lc3Nlbmdlci9JTWVzc2VuZ2VyJztcbmltcG9ydCB7IFBvc3RNZXNzYWdlTGlzdGVuZXIsIFBvc3RNZXNzYWdlU2VuZGVyIH0gZnJvbSAnLi9VbmRpcmVjdGVkUG9zdE1lc3NhZ2VCcmlkZ2UnO1xuaW1wb3J0IHR5cGUgeyBJbmRleEtleSB9IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBCcmlkZ2VzIGFuZCBzZXRzIHVwIGEgZGlyZWN0IGNoYW5uZWwgYmV0d2VlbiB0d28gV2luZG93cyB1c2luZyBwb3N0TWVzc2FnZVxuICpcbiAqIEBwYXJhbSBPdXRnb2luZ0RhdGFNYXBUIFRoZSBvdXRnb2luZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICogQHBhcmFtIEluY29taW5nRGF0YU1hcFQgVGhlIGluY29taW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkXG4gKi9cbmV4cG9ydCBjbGFzcyBQb3N0TWVzc2FnZUJyaWRnZTxcbiAgT3V0Z29pbmdEYXRhTWFwVCxcbiAgSW5jb21pbmdEYXRhTWFwVCxcbj4gaW1wbGVtZW50cyBJTWVzc2VuZ2VyQnJpZGdlPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+IHtcbiAgcHJpdmF0ZSBsaXN0ZW5lcjogSVVuZGlyZWN0ZWRNZXNzZW5nZXJMaXN0ZW5lcjxJbmNvbWluZ0RhdGFNYXBUPjtcbiAgcHJpdmF0ZSBzZW5kZXI6IElVbmRpcmVjdGVkTWVzc2VuZ2VyU2VuZGVyPE91dGdvaW5nRGF0YU1hcFQsIFdpbmRvdz47XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzb3VyY2VXaW5kb3c6IFdpbmRvdywgdGFyZ2V0V2luZG93OiBXaW5kb3csIHRhcmdldE9yaWdpbjogc3RyaW5nID0gJyonKSB7XG4gICAgdGhpcy5saXN0ZW5lciA9IG5ldyBQb3N0TWVzc2FnZUxpc3RlbmVyKHNvdXJjZVdpbmRvdyk7XG4gICAgdGhpcy5zZW5kZXIgPSBuZXcgUG9zdE1lc3NhZ2VTZW5kZXIodGFyZ2V0V2luZG93LCB0YXJnZXRPcmlnaW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHJlY2VpdmluZyBtZXNzYWdlIGV2ZW50cyBmcm9tIHBvc3RNZXNzYWdlXG4gICAqXG4gICAqIEBwYXJhbSBvYnNlcnZlclxuICAgKi9cbiAgcHVibGljIGxpc3RlbihvYnNlcnZlcjogSU9ic2VydmVyPFtJTWVzc2FnZTxrZXlvZiBJbmNvbWluZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPl0+KTogdm9pZCB7XG4gICAgdGhpcy5saXN0ZW5lci5saXN0ZW4ob2JzZXJ2ZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgcmVjZWl2aW5nIG1lc3NhZ2UgZXZlbnRzIGZyb20gcG9zdE1lc3NhZ2VcbiAgICovXG4gIHB1YmxpYyBzdG9wTGlzdGVuaW5nKCk6IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXIuc3RvcExpc3RlbmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBtZXNzYWdlIG92ZXIgcG9zdE1lc3NhZ2UgdG8gdGhlIGB0YXJnZXRXaW5kb3dgXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlXG4gICAqL1xuICBwdWJsaWMgc2VuZChtZXNzYWdlOiBJQnJpZGdlTWVzc2FnZTxJbmRleEtleTxPdXRnb2luZ0RhdGFNYXBUPiwgT3V0Z29pbmdEYXRhTWFwVD4pOiB2b2lkIHtcbiAgICB0aGlzLnNlbmRlci5zZW5kKG1lc3NhZ2UsIHRoaXMuc291cmNlV2luZG93KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTWVzc2VuZ2VyIH0gZnJvbSAnLi4vTWVzc2VuZ2VyL01lc3Nlbmdlcic7XG5pbXBvcnQgdHlwZSB7IElNZXNzZW5nZXJGYWN0b3J5LCBJTWVzc2VuZ2VyIH0gZnJvbSAnLi4vTWVzc2VuZ2VyL0lNZXNzZW5nZXInO1xuaW1wb3J0IHsgUG9zdE1lc3NhZ2VCcmlkZ2UgfSBmcm9tICcuL1Bvc3RNZXNzYWdlQnJpZGdlJztcblxuLyoqXG4gKiBBIHNpbXBsZSBmYWN0b3J5IHRvIGNyZWF0ZSBQb3N0TWVzc2FnZSB0byBoaWRlIGF3YXkgdGhlIGRldGFpbHMgb2YgaWRzIGFuZCBzb3VyY2UvYXJnZXQgV2luZG93IGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBQb3N0TWVzc2FnZUZhY3Rvcnk8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4gaW1wbGVtZW50cyBJTWVzc2VuZ2VyRmFjdG9yeTxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPiAge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHNvdXJjZUlkOiBudW1iZXIsIHByaXZhdGUgc291cmNlV2luZG93OiBXaW5kb3csXG4gICAgcHJpdmF0ZSB0YXJnZXRJZDogbnVtYmVyLCBwcml2YXRlIHRhcmdldFdpbmRvdzogV2luZG93LCBwcml2YXRlIHRhcmdldE9yaWdpbjogc3RyaW5nID0gJyonKSB7IH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgUG9zdE1lc3NhZ2UgY2hhbm5lbFxuICAgKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWQgYnkgdGhlIG5ld2x5IGNyZWF0ZWQgSU1lc3NlbmdlclxuICAgKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgaW5jb21pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWQgYnkgdGhlIG5ld2x5IGNyZWF0ZWQgSU1lc3NlbmdlclxuICAgKi9cbiAgcHVibGljIGNyZWF0ZU1lc3NlbmdlcigpOiBJTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+IHtcbiAgICBjb25zdCBwb3N0TWVzc2FnZUJyaWRnZSA9IG5ldyBQb3N0TWVzc2FnZUJyaWRnZTxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPih0aGlzLnNvdXJjZVdpbmRvdywgdGhpcy50YXJnZXRXaW5kb3csIHRoaXMudGFyZ2V0T3JpZ2luKTtcbiAgICBjb25zdCBtZXNzZW5nZXIgPSBuZXcgTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+KHRoaXMuc291cmNlSWQsIHRoaXMudGFyZ2V0SWQsIHBvc3RNZXNzYWdlQnJpZGdlKTtcbiAgICByZXR1cm4gbWVzc2VuZ2VyO1xuICB9XG59XG4iLCIvKipcbiAqIEEgbG9hZGVyIGZvciBmZXRjaGluZyByZW1vdGUgc2NyaXB0c1xuICovXG5leHBvcnQgY2xhc3MgRHluYW1pY0xpYkxvYWRlciB7XG4gIHByaXZhdGUgbGlicmFyeUNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIFNjcmlwdEZldGNoZXI8dW5rbm93bj4+KCk7XG5cbiAgLyoqXG4gICAqIEZldGNoIGEgbGlicmFyeSBmcm9tIGBwYXRoYFxuICAgKlxuICAgKiBAcGFyYW0gcGF0aFxuICAgKiBAcGFyYW0gd2luZG93S2V5IElmIFdlYnBhY2sgYnVpbHQgdGhlIGxpYnJhcnkgdXNpbmcgYGxpYnJhcnlUYXJnZXQ6ICd3aW5kb3cnYCwgdGhpcyBpcyB0aGUgYGxpYnJhcnlgIHBhcmFtIGluIHRoZSB3ZWJwYWNrIGNvbmZpZ1xuICAgKi9cbiAgcHVibGljIGxvYWQ8VD4ocGF0aDogc3RyaW5nLCB3aW5kb3dLZXk/OiBzdHJpbmcpOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCBzY3JpcHRGZXRjaGVyID0gdGhpcy5saWJyYXJ5Q2FjaGUuZ2V0KHBhdGgpIGFzIFNjcmlwdEZldGNoZXI8VD4gfHwgbmV3IFNjcmlwdEZldGNoZXI8VD4ocGF0aCwgd2luZG93S2V5KTtcbiAgICB0aGlzLmxpYnJhcnlDYWNoZS5zZXQocGF0aCwgc2NyaXB0RmV0Y2hlcik7XG5cbiAgICByZXR1cm4gc2NyaXB0RmV0Y2hlci5saWJyYXJ5O1xuICB9XG59XG5cbi8qKlxuICogRmV0Y2hlcyBhIHNjcmlwdFxuICovXG5jbGFzcyBTY3JpcHRGZXRjaGVyPFQ+IHtcbiAgcHJpdmF0ZSBsaWJyYXJ5UmVzb2x2ZXIhOiAobGliOiBUKSA9PiB2b2lkO1xuICBwcml2YXRlIGxpYnJhcnlSZWplY3RlciE6IChlcnI6IHN0cmluZykgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfbGlicmFyeVByb21pc2U6IFByb21pc2U8VD47XG5cbiAgY29uc3RydWN0b3IocGF0aDogc3RyaW5nLCB3aW5kb3dLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLl9saWJyYXJ5UHJvbWlzZSA9IG5ldyBQcm9taXNlPFQ+KChyZXMsIHJlaikgPT4ge1xuICAgICAgdGhpcy5saWJyYXJ5UmVzb2x2ZXIgPSByZXM7XG4gICAgICB0aGlzLmxpYnJhcnlSZWplY3RlciA9IHJlajtcbiAgICB9KTtcbiAgICB0aGlzLmZldGNoKHBhdGgsIHdpbmRvd0tleSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoKHBhdGg6IHN0cmluZywgd2luZG93S2V5Pzogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1vZHVsZSA9IGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrSWdub3JlOiB0cnVlICovIHBhdGgpO1xuICAgICAgY29uc3QgbGliID0geyAuLi5tb2R1bGUgfSBhcyBUO1xuXG4gICAgICAvLyBpZiB0aGUgYHdpbmRvd0tleWAgYXJnIHdhcyBwcm92aWRlZCBhbmQgdGhlIGxpYnJhcnkncyBjb250ZW50cyB3ZXJlIGF0dGFjaGVkIHRvIHRoZSB3aW5kb3csIGFzc2lnbiB0aGF0IHRvIHRoZSBgbGliYCBvYmplY3RcbiAgICAgIGlmICh3aW5kb3dLZXkgJiYgd2luZG93S2V5IGluIHdpbmRvdykge1xuICAgICAgICBjb25zdCBsaWJPYmplY3QgPSB3aW5kb3dbd2luZG93S2V5IGFzIGtleW9mIFdpbmRvd10gfHwge307XG4gICAgICAgIE9iamVjdC5hc3NpZ24obGliLCBsaWJPYmplY3QpO1xuICAgICAgICBkZWxldGUgd2luZG93W3dpbmRvd0tleSBhcyBrZXlvZiBXaW5kb3ddO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxpYnJhcnlSZXNvbHZlcihsaWIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMubGlicmFyeVJlamVjdGVyKGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBIHByb21pc2Ugb2YgdGhlIGxpYnJhcnkgYmVpbmcgbG9hZGVkXG4gICAqL1xuICBwdWJsaWMgZ2V0IGxpYnJhcnkoKTogUHJvbWlzZTxUPiB7XG4gICAgcmV0dXJuIHRoaXMuX2xpYnJhcnlQcm9taXNlO1xuICB9XG5cbn1cbiIsImltcG9ydCB0eXBlIHsgQ29ubmVjdFJlc3BvbnNlIH0gZnJvbSAnLi9Db25uZWN0b3InO1xuaW1wb3J0IHR5cGUgeyBJTWVzc2VuZ2VyRmFjdG9yeSB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5cbmltcG9ydCB0eXBlIHsgTXBTZGsgfSBmcm9tICdAc2RrL3R5cGVzJztcbmltcG9ydCB7IER5bmFtaWNMaWJMb2FkZXIgfSBmcm9tICdkeW5hbWljLWxpYi1sb2FkZXInO1xuXG50eXBlIERpY3Q8VCA9IHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgVCB8IHVuZGVmaW5lZD47XG5cbi8vIGRlY2xhcmUgY2xhc3MgaXMgbGlrZSBkZWZpbmluZyBhbiBpbnRlcmZhY2UsIGJ1dCBpdCBjYW4gaGF2ZSBhIGNvbnN0cnVjdG9yXG4vLyBpdCdzIHNpbWlsYXIgdG8gYGV4dGVybmAsIHdoZXJlIHRoaXMgY2xhc3MgaXMgZnVsbHkgZGVmaW5lZCBhbmQgaW1wbGVtZW50ZWQgZWxzZXdoZXJlXG5kZWNsYXJlIGNsYXNzIFNka0J1aWxkZXI8T3V0Z29pbmdEYXRhTWFwVCA9IHVua25vd24sIEluY29taW5nRGF0YU1hcFQgPSB1bmtub3duPiB7XG4gIGNvbnN0cnVjdG9yKG1lc3NlbmdlckZhY3Rvcnk6IElNZXNzZW5nZXJGYWN0b3J5PE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+LCB3aW5kb3dDb250ZXh0OiBXaW5kb3cpO1xuICBwdWJsaWMgYnVpbGQoc2VyaWFsaXplZEludGVyZmFjZTogRGljdCk6IE1wU2RrO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTZGtDb25uZWN0b3I8VCBleHRlbmRzIENvbm5lY3RSZXNwb25zZT4ge1xuICBjb25uZWN0KCk6IFByb21pc2U8VD47XG4gIGNhbmNlbENvbm5lY3RpbmcoKTogdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2VuZ2VyRmFjdG9yeUZldGNoZXI8Q29ubmVjdFJlc3BvbnNlVCBleHRlbmRzIENvbm5lY3RSZXNwb25zZSwgT3V1dGdvaW5nRGF0YU1hcCwgSW5jb21pbmdEYXRhTWFwPiA9IHtcbiAgZ2V0RmFjdG9yeShjb25uZWN0UmVzcG9uc2U6IENvbm5lY3RSZXNwb25zZVQpOiBJTWVzc2VuZ2VyRmFjdG9yeTxPdXV0Z29pbmdEYXRhTWFwLCBJbmNvbWluZ0RhdGFNYXA+O1xufTtcblxuZXhwb3J0IG5hbWVzcGFjZSBNUF9TREsge1xuICBjb25zdCBsaWJMb2FkZXIgPSBuZXcgRHluYW1pY0xpYkxvYWRlcigpO1xuICBleHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdDxUIGV4dGVuZHMgQ29ubmVjdFJlc3BvbnNlID0gQ29ubmVjdFJlc3BvbnNlLCBPdXRnb2luZ0RhdGFNYXAgPSB1bmtub3duLCBJbmNvbWluZ0RhdGFNYXAgPSB1bmtub3duPihcbiAgICBjb25uZWN0b3I6IElTZGtDb25uZWN0b3I8VD4sXG4gICAgZmFjdG9yeUZldGNoZXI6IE1lc3NlbmdlckZhY3RvcnlGZXRjaGVyPFQsIE91dGdvaW5nRGF0YU1hcCwgSW5jb21pbmdEYXRhTWFwPixcbiAgICB3aW5kb3dDb250ZXh0OiBXaW5kb3csXG4gICk6IFByb21pc2U8TXBTZGs+IHtcbiAgICBsZXQgY29ubmVjdFJlc3BvbnNlOiBUO1xuICAgIHRyeSB7XG4gICAgICBjb25uZWN0UmVzcG9uc2UgPSBhd2FpdCBjb25uZWN0b3IuY29ubmVjdCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBhZnRlciBhIGNvbm5lY3Rpb24gaXMgc3VjY2Vzc2Z1bCBvciBub3QsIHNodXRkb3duIHRoZSBjb25uZWN0b3IgYW5kIGl0cyBwb3N0bWVzc2FnZSByZWNlaXZpbmcgbWVzc2FnZXNcbiAgICAgIGNvbm5lY3Rvci5jYW5jZWxDb25uZWN0aW5nKCk7XG4gICAgfVxuXG4gICAgLy8gZmV0Y2ggYW5kIGJ1aWxkIHRoZSBjbGllbnQgaW50ZXJmYWNlXG4gICAgY29uc3QgYnVpbGRlciA9IGF3YWl0IGZldGNoU2NyaXB0KGNvbm5lY3RSZXNwb25zZS5zY3JpcHRVcmwpO1xuICAgIC8vIHNldCB1cCBhIGZhY3Rvcnkgc28gdGhhdCB0aGUgY2xpZW50IGNhbiBjcmVhdGUgTWVzc2VuZ2VyIGNoYW5uZWxzXG4gICAgY29uc3QgbWVzc2VuZ2VyRmFjdG9yeSA9IGZhY3RvcnlGZXRjaGVyLmdldEZhY3RvcnkoY29ubmVjdFJlc3BvbnNlKTtcbiAgICAvLyBidWlsZCBhbmQgcmV0dXJuIHRoZSBjbGllbnQgaW50ZXJmYWNlIHRvIHRoZSB1c2VyXG4gICAgcmV0dXJuIGJ1aWxkSW50ZXJmYWNlKHdpbmRvd0NvbnRleHQsIGJ1aWxkZXIsIG1lc3NlbmdlckZhY3RvcnksIGNvbm5lY3RSZXNwb25zZS5zZXJpYWxpemVkSW50ZXJmYWNlKTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGZldGNoU2NyaXB0KHVybD86IHN0cmluZyk6IFByb21pc2U8dHlwZW9mIFNka0J1aWxkZXI+IHtcbiAgICBpZiAoIXVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGVkIHRvIGxvYWQgdGhlIHNkaycpO1xuICAgIH1cblxuICAgIC8vIGZldGNoIGFuZCBjYWNoZSB0aGUgcHJvbWlzZSBmb3IgdGhlIHJlcXVlc3RlZCBzY3JpcHRcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2RrQ2xpZW50ID0gYXdhaXQgbGliTG9hZGVyLmxvYWQ8e1Nka0J1aWxkZXI6IHR5cGVvZiBTZGtCdWlsZGVyfT4odXJsLCAnc2RrLWNsaWVudCcpO1xuICAgICAgaWYgKHNka0NsaWVudCAmJiBzZGtDbGllbnQuU2RrQnVpbGRlciAmJiB0eXBlb2Ygc2RrQ2xpZW50LlNka0J1aWxkZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHNka0NsaWVudC5TZGtCdWlsZGVyO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gY2F0Y2ggYWxsIGFuZCBcImlnbm9yZVwiLCBzaW5jZSB3ZSdsbCB0aHJvdyBzaG9ydGx5IGFueXdheVxuICAgIH1cbiAgICB0aHJvdyBFcnJvcihgQ291bGQgbm90IGxvYWQgdGhlIHNkayBmcm9tICR7dXJsfWApO1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRJbnRlcmZhY2U8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4oXG4gICAgd2luZG93Q29udGV4dDogV2luZG93LFxuICAgIHNka0J1aWxkZXI6IHR5cGVvZiBTZGtCdWlsZGVyLFxuICAgIG1lc3NlbmdlckZhY3Rvcnk6IElNZXNzZW5nZXJGYWN0b3J5PE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+LFxuICAgIHNlcmlhbGl6ZWRJbnRlcmZhY2U6IERpY3QsXG4gICk6IFJldHVyblR5cGU8U2RrQnVpbGRlclsnYnVpbGQnXT4ge1xuICAgIHJldHVybiBuZXcgc2RrQnVpbGRlcihtZXNzZW5nZXJGYWN0b3J5LCB3aW5kb3dDb250ZXh0KS5idWlsZChzZXJpYWxpemVkSW50ZXJmYWNlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBFcnJvclR5cGUgfSBmcm9tICcuL0Vycm9ycyc7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tIE91dGdvaW5nIE1lc3NhZ2VzIC0tLS0tLS0tLS0tLS0tLS0tIC8vXG5leHBvcnQgZW51bSBPdXRnb2luZ01lc3NhZ2VUeXBlIHtcbiAgQ09OTkVDVCA9ICdwb3N0bWVzc2FnZS5jb25uZWN0Jyxcbn1cblxuLyoqXG4gKiBUaGUgZGF0YSBwYXlsb2FkIG9mIGEgQ29ubmVjdCBtZXNzYWdlXG4gKi9cbmV4cG9ydCB0eXBlIENvbm5lY3RQYXlsb2FkID0ge1xuICAvKiogVGhlIHZlcnNpb24gb2YgdGhlIHNkayBib290c3RyYXAgYXR0ZW1wdGluZyB0byBjb25uZWN0ICovXG4gIGJvb3RzdHJhcFZlcnNpb246IHN0cmluZztcbiAgb3B0aW9uczoge1xuICAgIC8qKiBBbiBhdXRoIHRva2VuICovXG4gICAgYXV0aD86IHN0cmluZztcblxuICAgIC8qKiBwcm92aWRlciBuYW1lICovXG4gICAgcHJvdmlkZXI/OiBzdHJpbmc7XG5cbiAgICBzZGtUeXBlPzogc3RyaW5nO1xuICB9LFxuICAvLyBUT0RPIChzZGspOiBzZGsgYm9vdHN0cmFwIHYyLnggcGFzc2VkIHRoZSBhcHBsaWNhdGlvbktleTsgcmVtb3ZlIHRoaXMgd2hlbiB0aG9zZSB2ZXJzaW9ucyBhcmUgbm8gbG9uZ2VyIHN1cHBvcnRlZFxuICBhcHBsaWNhdGlvbktleT86IHN0cmluZztcbn07XG5cbi8qKlxuICogQSBtYXAgYmV0d2VlbiB0aGUgb3V0Z29pbmcgbWVzc2FnZXMgdHlwZXMgYW5kIHRoZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWVzc2FnZVxuICovXG5leHBvcnQgdHlwZSBPdXRnb2luZ0RhdGFNYXAgPSB7XG4gIFtPdXRnb2luZ01lc3NhZ2VUeXBlLkNPTk5FQ1RdOiBDb25uZWN0UGF5bG9hZCxcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tIEluY29taW5nIE1lc3NhZ2VzIC0tLS0tLS0tLS0tLS0tLS0tIC8vXG5leHBvcnQgZW51bSBJbmNvbWluZ01lc3NhZ2VUeXBlIHtcbiAgSEFORFNIQUtFID0gJ3Bvc3RtZXNzYWdlLmhhbmRzaGFrZScsXG4gIEFDQ0VQVCAgICA9ICdwb3N0bWVzc2FnZS5hY2NlcHQnLFxuICBSRUpFQ1QgICAgPSAncG9zdG1lc3NhZ2UucmVqZWN0Jyxcbn1cblxuLyoqXG4gKiBUaGUgZGF0YSBvZiBhIG1lc3NhZ2Ugc2lnbmFsbGluZyB0aGF0IHRoZSBjb25uZWN0aW9uIHdhcyAobW9zdGx5KSBhY2NlcHRlZCBidXQgaGFzbid0IGJlZW4gZmluYWxpemVkIHlldFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEhhbmRzaGFrZVBheWxvYWQge1xuICAvKiogRE8gTk9UIFVTRTogUGxhY2Vob2xkZXIgdG8gbWFrZSB0aGlzIHR5cGUgdW5pcXVlIGZyb20gb3RoZXIgbWVzc2FnZSBEYXRhIHR5cGVzICovXG4gIHVudXNlZD86ICdoYW5kc2hha2UuZGF0YSc7XG59XG5cbi8qKlxuICogVGhlIGRhdGEgb2YgYSBtZXNzYWdlIHNpZ25hbGxpbmcgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIGhvc3Qgd2FzIGFjY2VwdGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQWNjZXB0UGF5bG9hZCB7XG4gIC8qKiBUaGUgaWQgdGhhdCB3YXMgYXNzaWduZWQgdG8gdGhpZSBjbGllbnQgYmVoaW5kIHRoaXMgY29ubmVjdGlvbiAqL1xuICBzb3VyY2VJZDogbnVtYmVyO1xuICAvKiogVGhlIHJlbW90ZSB1cmwgb2YgdGhlIGNsaWVudCBzY3JpcHQgdG8gYmUgZHluYW1pY2FsbHkgbG9hZGVkICovXG4gIHNjcmlwdFVybDogc3RyaW5nO1xuICAvKiogVGhlIHNlcmlhbGl6ZWQgaW50ZXJmYWNlIHRoYXQgdGhlIGhvc3Qgc3VwcG9ydHMgKi9cbiAgaW50ZXJmYWNlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duIHwgdW5kZWZpbmVkPjtcbiAgLyoqIFRoZSBpZCBvZiB0aGUgaG9zdCB0aGF0IGFjY2VwdGVkIHRoZSBjb25uZWN0aW9uICovXG4gIHRhcmdldElkOiBudW1iZXI7XG4gIC8qKiBUaGUgb3JpZ2luIG9mIHRoZSBob3N0IHRoYXQgYWNjZXB0ZWQgdGhlIGNvbm5lY3Rpb24gKi9cbiAgdGFyZ2V0T3JpZ2luOiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGhlIGRhdGEgb2YgYSBtZXNzYWdlIHNpZ25hbGxpbmcgdGhhdCB0aGUgY29ubmVjdGlvbiB3YXMgcmVqZWN0ZWQgb3IgZmFpbGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVqZWN0UGF5bG9hZCB7XG4gIC8qKiBUaGUgZXJyb3IgbWVzc2FnZSB3aHkgY29ubmVjdGluZyBmYWlsZWQgKi9cbiAgcmVhc29uOiBzdHJpbmc7XG4gIC8qKiBUaGUgc3BlY2lmaWMgdHlwZSBvZiBlcnJvciB0aHJvd24gd2hlbiBjb25uZWN0aW5nICovXG4gIGVycm9yVHlwZTogRXJyb3JUeXBlO1xufVxuXG4vKipcbiAqIEEgbWFwIGJldHdlZW4gdGhlIGluY29taW5nIG1lc3NhZ2VzIHR5cGVzIGFuZCB0aGUgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIG1lc3NhZ2VcbiAqL1xuZXhwb3J0IHR5cGUgSW5jb21pbmdEYXRhTWFwID0ge1xuICBbSW5jb21pbmdNZXNzYWdlVHlwZS5IQU5EU0hBS0VdOiBIYW5kc2hha2VQYXlsb2FkO1xuICBbSW5jb21pbmdNZXNzYWdlVHlwZS5BQ0NFUFRdOiBBY2NlcHRQYXlsb2FkO1xuICBbSW5jb21pbmdNZXNzYWdlVHlwZS5SRUpFQ1RdOiBSZWplY3RQYXlsb2FkO1xufTtcbiIsImV4cG9ydCBlbnVtIEVycm9yVHlwZSB7XG4gIENBTkNFTExFRCA9ICdDb25uZWN0aW9uQ2FuY2VsbGVkJyxcbiAgUkVGVVNFRCA9ICdDb25uZWN0aW9uUmVmdXNlZCcsXG4gIElOVkFMSURfUFJPVklERVIgPSAnSW52YWxpZFByb3ZpZGVyJyxcbiAgS0VZX01JU01BVENIID0gJ0tleVJlZmVycmVyTWlzbWF0Y2gnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNka0Nvbm5lY3RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcmVhZG9ubHkgdHlwZTogRXJyb3JUeXBlO1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG59XG4iLCJpbXBvcnQgdHlwZSB7IElNZXNzYWdlIH0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB0eXBlIHsgQ29ubmVjdE9wdGlvbnMgfSBmcm9tICdAc2RrL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgQ29ubmVjdFBheWxvYWQsIE91dGdvaW5nRGF0YU1hcH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcbmltcG9ydCB7IE91dGdvaW5nTWVzc2FnZVR5cGUgfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ29ubmVjdE1lc3NhZ2UgaW1wbGVtZW50cyBJTWVzc2FnZTxPdXRnb2luZ01lc3NhZ2VUeXBlLkNPTk5FQ1QsIE91dGdvaW5nRGF0YU1hcD4ge1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZSA9IE91dGdvaW5nTWVzc2FnZVR5cGUuQ09OTkVDVDtcbiAgcHVibGljIHJlYWRvbmx5IHBheWxvYWQ6IENvbm5lY3RQYXlsb2FkO1xuXG4gIGNvbnN0cnVjdG9yKGJvb3RzdHJhcFZlcnNpb246IHN0cmluZywgb3B0aW9uczogUGFydGlhbDxDb25uZWN0T3B0aW9ucz4gPSB7fSkge1xuICAgIHRoaXMucGF5bG9hZCA9IHtcbiAgICAgIGJvb3RzdHJhcFZlcnNpb24sXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGF1dGg6IG9wdGlvbnMuYXV0aCxcbiAgICAgICAgcHJvdmlkZXI6IG9wdGlvbnMucHJvdmlkZXIsXG4gICAgICAgIHNka1R5cGU6IG9wdGlvbnMuc2RrVHlwZSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBDbGllbnRJbmZvLCBJTWVzc2FnZU9ic2VydmVyIH0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB0eXBlIHsgSW5jb21pbmdEYXRhTWFwLCBIYW5kc2hha2VQYXlsb2FkIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcbmltcG9ydCB7IEluY29taW5nTWVzc2FnZVR5cGUgfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhbmRzaGFrZVJlY2VpdmVyIHtcbiAgaGFuZHNoYWtlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBIYW5kc2hha2VPYnNlcnZlciBpbXBsZW1lbnRzIElNZXNzYWdlT2JzZXJ2ZXI8SW5jb21pbmdNZXNzYWdlVHlwZS5IQU5EU0hBS0UsIEluY29taW5nRGF0YU1hcD4ge1xuICBwdWJsaWMgcmVhZG9ubHkgbWVzc2FnZVR5cGUgPSBJbmNvbWluZ01lc3NhZ2VUeXBlLkhBTkRTSEFLRTtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWNlaXZlcjogSGFuZHNoYWtlUmVjZWl2ZXIpIHsgfVxuXG4gIHB1YmxpYyBub3RpZnkoX2hhbmRzaGFrZTogSGFuZHNoYWtlUGF5bG9hZCwgX2NsaWVudEluZm86IENsaWVudEluZm8sIF90aW1lc3RhbXA6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucmVjZWl2ZXIuaGFuZHNoYWtlKCk7XG4gIH1cbn1cbiIsImltcG9ydCB0eXBlIHsgQ2xpZW50SW5mbywgSU1lc3NhZ2VPYnNlcnZlciB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IEluY29taW5nRGF0YU1hcCwgQWNjZXB0UGF5bG9hZCB9IGZyb20gJy4uL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgeyBJbmNvbWluZ01lc3NhZ2VUeXBlIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcblxudHlwZSBEaWN0PFQgPSB1bmtub3duPiA9IFJlY29yZDxzdHJpbmcsIFQgfCB1bmRlZmluZWQ+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEFjY2VwdFJlY2VpdmVyIHtcbiAgYWNjZXB0KHNvdXJjZUlkOiBudW1iZXIsIHNjcmlwdFVybDogc3RyaW5nLCBzZXJpYWxpemVkSW50ZXJmYWNlOiBEaWN0LCB0YXJnZXRJZDogbnVtYmVyLCB0YXJnZXRPcmlnaW46IHN0cmluZyk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBBY2NlcHRPYnNlcnZlciBpbXBsZW1lbnRzIElNZXNzYWdlT2JzZXJ2ZXI8SW5jb21pbmdNZXNzYWdlVHlwZS5BQ0NFUFQsIEluY29taW5nRGF0YU1hcD4ge1xuICBwdWJsaWMgcmVhZG9ubHkgbWVzc2FnZVR5cGUgPSBJbmNvbWluZ01lc3NhZ2VUeXBlLkFDQ0VQVDtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWNlaXZlcjogQWNjZXB0UmVjZWl2ZXIpIHt9XG5cbiAgcHVibGljIG5vdGlmeShhY2NlcHQ6IEFjY2VwdFBheWxvYWQsIF9jbGllbnRJbmZvOiBDbGllbnRJbmZvLCBfdGltZXN0YW1wOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB7IHNvdXJjZUlkLCBzY3JpcHRVcmwsIHRhcmdldElkLCB0YXJnZXRPcmlnaW4gfSA9IGFjY2VwdDtcbiAgICBjb25zdCBzZXJpYWxpemVkSW50ZXJmYWNlID0gYWNjZXB0LmludGVyZmFjZTsgLy8gY2FuJ3QgYmUgZGVzdHJ1Y3R1cmVkIGJlY2F1c2UgYGludGVyZmFjZWAgaXMgYSByZXNlcnZlZCB3b3JkXG5cbiAgICB0aGlzLnJlY2VpdmVyLmFjY2VwdChzb3VyY2VJZCwgc2NyaXB0VXJsLCBzZXJpYWxpemVkSW50ZXJmYWNlLCB0YXJnZXRJZCwgdGFyZ2V0T3JpZ2luKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRXJyb3JUeXBlLCB0eXBlIFNka0Nvbm5lY3RFcnJvciB9IGZyb20gJy4vdHlwZSc7XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uUmVmdXNlZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBTZGtDb25uZWN0RXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogRXJyb3JUeXBlID0gRXJyb3JUeXBlLlJFRlVTRUQ7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5uYW1lID0gJ0Nvbm5lY3Rpb25SZWZ1c2VkRXJyb3InO1xuICB9XG59XG4iLCJpbXBvcnQgeyBFcnJvclR5cGUsIHR5cGUgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IGNsYXNzIEludmFsaWRQcm92aWRlckVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBTZGtDb25uZWN0RXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogRXJyb3JUeXBlID0gRXJyb3JUeXBlLklOVkFMSURfUFJPVklERVI7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnSW52YWxpZFByb3ZpZGVyRXJyb3InO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IEVycm9yVHlwZSwgdHlwZSBTZGtDb25uZWN0RXJyb3IgfSBmcm9tICcuL3R5cGUnO1xuXG5leHBvcnQgY2xhc3MgS2V5UmVmZXJyZXJNaXNtYXRjaEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBTZGtDb25uZWN0RXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogRXJyb3JUeXBlID0gRXJyb3JUeXBlLktFWV9NSVNNQVRDSDtcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdLZXlSZWZlcnJlck1pc21hdGNoRXJyb3InO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb25uZWN0aW9uUmVmdXNlZEVycm9yIH0gZnJvbSAnLi9Db25uZWN0aW9uUmVmdXNlZCc7XG5pbXBvcnQgeyBJbnZhbGlkUHJvdmlkZXJFcnJvciB9IGZyb20gJy4vSW52YWxpZFByb3ZpZGVyJztcbmltcG9ydCB7IEtleVJlZmVycmVyTWlzbWF0Y2hFcnJvciB9IGZyb20gJy4vS2V5UmVmZXJyZXJNaXNtYXRjaCc7XG5pbXBvcnQgeyBFcnJvclR5cGUsIHR5cGUgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IHsgQ29ubmVjdGlvblJlZnVzZWRFcnJvciB9IGZyb20gJy4vQ29ubmVjdGlvblJlZnVzZWQnO1xuZXhwb3J0IHsgS2V5UmVmZXJyZXJNaXNtYXRjaEVycm9yIH0gZnJvbSAnLi9LZXlSZWZlcnJlck1pc21hdGNoJztcbmV4cG9ydCB7IEludmFsaWRQcm92aWRlckVycm9yIH0gZnJvbSAnLi9JbnZhbGlkUHJvdmlkZXInO1xuXG5leHBvcnQgeyBFcnJvclR5cGUsIHR5cGUgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IGNvbnN0IEVycm9yVHlwZU1hcDogS2V5ZWREaWN0PHR5cGVvZiBFcnJvclR5cGUsIG5ldyhtZXNzYWdlPzogc3RyaW5nKSA9PiBTZGtDb25uZWN0RXJyb3I+ID0ge1xuICBbRXJyb3JUeXBlLlJFRlVTRURdOiBDb25uZWN0aW9uUmVmdXNlZEVycm9yLFxuICBbRXJyb3JUeXBlLktFWV9NSVNNQVRDSF06IEtleVJlZmVycmVyTWlzbWF0Y2hFcnJvcixcbiAgW0Vycm9yVHlwZS5JTlZBTElEX1BST1ZJREVSXTogSW52YWxpZFByb3ZpZGVyRXJyb3IsXG59O1xuXG50eXBlIEtleWVkRGljdDxFIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4sIFYgPSBhbnk+ID0ge1xuICBba2V5IGluIEV4dHJhY3Q8RVtrZXlvZiBFXSwgbnVtYmVyIHwgc3RyaW5nPl0/OiBWO1xufTtcbiIsImltcG9ydCB0eXBlIHsgQ2xpZW50SW5mbywgSU1lc3NhZ2VPYnNlcnZlciB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IENvbm5lY3Rpb25SZWZ1c2VkRXJyb3IsIEludmFsaWRQcm92aWRlckVycm9yLCBLZXlSZWZlcnJlck1pc21hdGNoRXJyb3IgfSBmcm9tICcuLi9FcnJvcnMnO1xuaW1wb3J0IHsgRXJyb3JUeXBlTWFwIH0gZnJvbSAnLi4vRXJyb3JzJztcbmltcG9ydCB0eXBlIHsgSW5jb21pbmdEYXRhTWFwLCBSZWplY3RQYXlsb2FkIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcbmltcG9ydCB7IEluY29taW5nTWVzc2FnZVR5cGUgfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlamVjdFJlY2VpdmVyIHtcbiAgcmVqZWN0KHJlYXNvbjogQ29ubmVjdGlvblJlZnVzZWRFcnJvciB8IEludmFsaWRQcm92aWRlckVycm9yIHwgS2V5UmVmZXJyZXJNaXNtYXRjaEVycm9yKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFJlamVjdE9ic2VydmVyIGltcGxlbWVudHMgSU1lc3NhZ2VPYnNlcnZlcjxJbmNvbWluZ01lc3NhZ2VUeXBlLlJFSkVDVCwgSW5jb21pbmdEYXRhTWFwPiB7XG4gIHB1YmxpYyByZWFkb25seSBtZXNzYWdlVHlwZSA9IEluY29taW5nTWVzc2FnZVR5cGUuUkVKRUNUO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlY2VpdmVyOiBSZWplY3RSZWNlaXZlcikge31cblxuICBwdWJsaWMgbm90aWZ5KHJlamVjdDogUmVqZWN0UGF5bG9hZCwgX2NsaWVudEluZm86IENsaWVudEluZm8sIF90aW1lc3RhbXA6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGVycm9yVHlwZSA9IEVycm9yVHlwZU1hcFtyZWplY3QuZXJyb3JUeXBlXTtcbiAgICBpZiAoZXJyb3JUeXBlKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBlcnJvclR5cGUocmVqZWN0LnJlYXNvbik7XG4gICAgICB0aGlzLnJlY2VpdmVyLnJlamVjdChlcnJvcik7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBFcnJvclR5cGUsIHR5cGUgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25DYW5jZWxsZWRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgU2RrQ29ubmVjdEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IHR5cGU6IEVycm9yVHlwZSA9IEVycm9yVHlwZS5DQU5DRUxMRUQ7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdDb25uZWN0aW9uQ2FuY2VsbGVkRXJyb3InO1xuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7IElVbmRpcmVjdGVkTWVzc2VuZ2VyLCBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlcn0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB7IEFOWV9UQVJHRVQgfSBmcm9tICdAc2RrL21lc3NlbmdlcnMnO1xuaW1wb3J0IHR5cGUgeyBDb25uZWN0T3B0aW9ucyB9IGZyb20gJ0BzZGsvdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBPdXRnb2luZ0RhdGFNYXAsIEluY29taW5nRGF0YU1hcCB9IGZyb20gJy4uL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgeyBDb25uZWN0TWVzc2FnZSB9IGZyb20gJy4uL01lc3NhZ2VzL0Nvbm5lY3RNZXNzYWdlJztcbmltcG9ydCB7IEhhbmRzaGFrZU9ic2VydmVyIH0gZnJvbSAnLi4vTWVzc2FnZU9ic2VydmVycy9IYW5kc2hha2VPYnNlcnZlcic7XG5pbXBvcnQgeyBBY2NlcHRPYnNlcnZlciB9IGZyb20gJy4uL01lc3NhZ2VPYnNlcnZlcnMvQWNjZXB0T2JzZXJ2ZXInO1xuaW1wb3J0IHsgUmVqZWN0T2JzZXJ2ZXIgfSBmcm9tICcuLi9NZXNzYWdlT2JzZXJ2ZXJzL1JlamVjdE9ic2VydmVyJztcbmltcG9ydCB7IENvbm5lY3Rpb25DYW5jZWxsZWRFcnJvciB9IGZyb20gJy4uL0Vycm9ycy9DYW5jZWxsZWQnO1xuaW1wb3J0IHR5cGUgeyBTZGtDb25uZWN0RXJyb3IgfSBmcm9tICcuLi9FcnJvcnMnO1xuXG50eXBlIERpY3Q8VCA9IHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgVCB8IHVuZGVmaW5lZD47XG5cbmVudW0gQ29ubmVjdGlvblN0YXRlIHtcbiAgSURMRSxcbiAgQ09OTkVDVElORyxcbiAgSEFORFNIQUtFLFxuICBDT05ORUNURUQsXG4gIFJFSkVDVEVELFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RSZXNwb25zZSB7XG4gIHNvdXJjZUlkOiBudW1iZXI7XG4gIHRhcmdldElkOiBudW1iZXI7XG4gIHRhcmdldE9yaWdpbjogc3RyaW5nO1xuICBzY3JpcHRVcmw6IHN0cmluZztcbiAgc2VyaWFsaXplZEludGVyZmFjZTogRGljdDtcbn1cblxuZXhwb3J0IGNsYXNzIENvbm5lY3RvcjxTb3VyY2VUPiB7XG4gIHByaXZhdGUgY29ubmVjdGlvblN0YXRlOiBDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuSURMRTtcbiAgcHJpdmF0ZSBjb25uZWN0aW9uUG9sbDogbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBwcml2YXRlIGNvbm5lY3Rpb25Qcm9taXNlOiBQcm9taXNlPENvbm5lY3RSZXNwb25zZT47XG4gIHByaXZhdGUgcmVzb2x2ZUNvbm5lY3Rpb24hOiAodmFsdWU6IENvbm5lY3RSZXNwb25zZSkgPT4gdm9pZDtcbiAgcHJpdmF0ZSByZWplY3RDb25uZWN0aW9uITogKHJlYXNvbjogU2RrQ29ubmVjdEVycm9yKSA9PiB2b2lkO1xuXG4gIHByaXZhdGUgaGFuZHNoYWtlT2JzZXJ2ZXI6IEhhbmRzaGFrZU9ic2VydmVyO1xuICBwcml2YXRlIGFjY2VwdE9ic2VydmVyOiBBY2NlcHRPYnNlcnZlcjtcbiAgcHJpdmF0ZSByZWplY3RPYnNlcnZlcjogUmVqZWN0T2JzZXJ2ZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBtZXNzZW5nZXI6IElVbmRpcmVjdGVkTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcCwgSW5jb21pbmdEYXRhTWFwLCBTb3VyY2VUPixcbiAgICBwcml2YXRlIHRhcmdldDogSVVuZGlyZWN0ZWRNZXNzZW5nZXJTZW5kZXI8T3V0Z29pbmdEYXRhTWFwLCBTb3VyY2VUPixcbiAgICBwcml2YXRlIHNvdXJjZTogU291cmNlVFxuICApIHtcbiAgICBjbGFzcyBDb25uZWN0b3JGYWNhZGUge1xuICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25uZWN0b3I6IENvbm5lY3RvcjxTb3VyY2VUPikge31cbiAgICAgIHB1YmxpYyBoYW5kc2hha2UoKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdG9yLmhhbmRzaGFrZSgpO1xuICAgICAgfVxuICAgICAgcHVibGljIGFjY2VwdChzb3VyY2VJZDogbnVtYmVyLCBzY3JpcHRVcmw6IHN0cmluZywgc2VyaWFsaXplZEludGVyZmFjZTogRGljdCwgdGFyZ2V0SWQ6IG51bWJlciwgdGFyZ2V0T3JpZ2luOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0b3IuYWNjZXB0KHNvdXJjZUlkLCBzY3JpcHRVcmwsIHNlcmlhbGl6ZWRJbnRlcmZhY2UsIHRhcmdldElkLCB0YXJnZXRPcmlnaW4pO1xuICAgICAgfVxuICAgICAgcHVibGljIHJlamVjdChyZWFzb246IFNka0Nvbm5lY3RFcnJvcikge1xuICAgICAgICB0aGlzLmNvbm5lY3Rvci5yZWplY3QocmVhc29uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjb25uZWN0b3JGYWNhZGUgPSBuZXcgQ29ubmVjdG9yRmFjYWRlKHRoaXMpO1xuXG4gICAgdGhpcy5oYW5kc2hha2VPYnNlcnZlciA9IG5ldyBIYW5kc2hha2VPYnNlcnZlcihjb25uZWN0b3JGYWNhZGUpO1xuICAgIHRoaXMuYWNjZXB0T2JzZXJ2ZXIgPSBuZXcgQWNjZXB0T2JzZXJ2ZXIoY29ubmVjdG9yRmFjYWRlKTtcbiAgICB0aGlzLnJlamVjdE9ic2VydmVyID0gbmV3IFJlamVjdE9ic2VydmVyKGNvbm5lY3RvckZhY2FkZSk7XG4gICAgdGhpcy5jb25uZWN0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgdGhpcy5yZXNvbHZlQ29ubmVjdGlvbiA9IHJlcztcbiAgICAgIHRoaXMucmVqZWN0Q29ubmVjdGlvbiA9IHJlajtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0KHZlcnNpb246IHN0cmluZywgb3B0aW9uczogUGFydGlhbDxDb25uZWN0T3B0aW9ucz4gPSB7fSk6IFByb21pc2U8Q29ubmVjdFJlc3BvbnNlPiB7XG4gICAgaWYgKHRoaXMuY29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuSURMRSkge1xuICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuQ09OTkVDVElORztcbiAgICAgIHRoaXMubWVzc2VuZ2VyLmFkZE9ic2VydmVyKHRoaXMuaGFuZHNoYWtlT2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5tZXNzZW5nZXIuYWRkT2JzZXJ2ZXIodGhpcy5hY2NlcHRPYnNlcnZlcik7XG4gICAgICB0aGlzLm1lc3Nlbmdlci5hZGRPYnNlcnZlcih0aGlzLnJlamVjdE9ic2VydmVyKTtcbiAgICAgIC8vIFRPRE86IGZpZ3VyZSBvdXQgYSBiZXR0ZXIgd2F5IHRvIGVuc3VyZSBjb25uZWN0aW9uXG4gICAgICB0aGlzLmNvbm5lY3Rpb25Qb2xsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgLy8gc2VuZCB0aGUgbWVzc2FnZSB0byBhbnlib2R5IHdobydzIGxpc3RlbmluZyB3aXRoaW4gdGhlIHRhcmdldCB3aW5kb3dcbiAgICAgICAgdGhpcy5tZXNzZW5nZXIuc2VuZChuZXcgQ29ubmVjdE1lc3NhZ2UodmVyc2lvbiwgb3B0aW9ucyksIEFOWV9UQVJHRVQsIHRoaXMudGFyZ2V0LCB0aGlzLnNvdXJjZSk7XG4gICAgICB9LCA1MDApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25Qcm9taXNlO1xuICB9XG5cbiAgcHVibGljIGNhbmNlbENvbm5lY3RpbmcoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29ubmVjdGlvblN0YXRlIDwgQ29ubmVjdGlvblN0YXRlLkNPTk5FQ1RFRCkge1xuICAgICAgdGhpcy5zdG9wQ29ubmVjdFBvbGxpbmcoKTtcbiAgICAgIHRoaXMucmVqZWN0Q29ubmVjdGlvbihuZXcgQ29ubmVjdGlvbkNhbmNlbGxlZEVycm9yKCdVc2VyIG1hbnVhbGx5IGNhbmNlbGxlZCBjb25uZWN0aW9uJykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZHNoYWtlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdGF0ZSA8IENvbm5lY3Rpb25TdGF0ZS5IQU5EU0hBS0UpIHtcbiAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkhBTkRTSEFLRTtcbiAgICAgIHRoaXMuc3RvcENvbm5lY3RQb2xsaW5nKCk7XG5cbiAgICAgIHRoaXMubWVzc2VuZ2VyLnJlbW92ZU9ic2VydmVyKHRoaXMuaGFuZHNoYWtlT2JzZXJ2ZXIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWNjZXB0KHNvdXJjZUlkOiBudW1iZXIsIHNjcmlwdFVybDogc3RyaW5nLCBzZXJpYWxpemVkSW50ZXJmYWNlOiBEaWN0LCB0YXJnZXRJZDogbnVtYmVyLCB0YXJnZXRPcmlnaW46IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdGF0ZSA8IENvbm5lY3Rpb25TdGF0ZS5DT05ORUNURUQpIHtcbiAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkNPTk5FQ1RFRDtcblxuICAgICAgdGhpcy5tZXNzZW5nZXIucmVtb3ZlT2JzZXJ2ZXIodGhpcy5oYW5kc2hha2VPYnNlcnZlcik7XG4gICAgICB0aGlzLm1lc3Nlbmdlci5yZW1vdmVPYnNlcnZlcih0aGlzLmFjY2VwdE9ic2VydmVyKTtcbiAgICAgIHRoaXMubWVzc2VuZ2VyLnJlbW92ZU9ic2VydmVyKHRoaXMucmVqZWN0T2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5zdG9wQ29ubmVjdFBvbGxpbmcoKTtcblxuICAgICAgdGhpcy5yZXNvbHZlQ29ubmVjdGlvbih7XG4gICAgICAgIHNvdXJjZUlkLFxuICAgICAgICB0YXJnZXRJZCxcbiAgICAgICAgdGFyZ2V0T3JpZ2luLFxuICAgICAgICBzY3JpcHRVcmwsXG4gICAgICAgIHNlcmlhbGl6ZWRJbnRlcmZhY2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlamVjdChyZWFzb246IFNka0Nvbm5lY3RFcnJvcik6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdGF0ZSA8IENvbm5lY3Rpb25TdGF0ZS5DT05ORUNURUQpIHtcbiAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLlJFSkVDVEVEO1xuXG4gICAgICB0aGlzLm1lc3Nlbmdlci5yZW1vdmVPYnNlcnZlcih0aGlzLmhhbmRzaGFrZU9ic2VydmVyKTtcbiAgICAgIHRoaXMubWVzc2VuZ2VyLnJlbW92ZU9ic2VydmVyKHRoaXMuYWNjZXB0T2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5tZXNzZW5nZXIucmVtb3ZlT2JzZXJ2ZXIodGhpcy5yZWplY3RPYnNlcnZlcik7XG4gICAgICB0aGlzLnN0b3BDb25uZWN0UG9sbGluZygpO1xuXG4gICAgICB0aGlzLnJlamVjdENvbm5lY3Rpb24ocmVhc29uKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0b3BDb25uZWN0UG9sbGluZygpOiB2b2lkIHtcbiAgICBjbGVhckludGVydmFsKHRoaXMuY29ubmVjdGlvblBvbGwpO1xuICAgIHRoaXMuY29ubmVjdGlvblBvbGwgPSB1bmRlZmluZWQ7XG4gIH1cblxufVxuIiwiaW1wb3J0IHR5cGUgeyBJbmRleEtleSB9IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gdXNlIGluIHBsYWNlIG9mIGEgY2FsbGJhY2tcbiAqIEF2b2lkcyBpc3N1ZXMgd2l0aCB1bmJvdW5kIGZ1bmN0aW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElPYnNlcnZlcjxUIGV4dGVuZHMgdW5rbm93bltdPiB7XG4gIG5vdGlmeSguLi5kYXRhOiBUKTogdm9pZDtcbn1cblxuLyoqXG4gKiBJbmZvcm1hdGlvbiBhYm91dCBhIGNsaWVudCBzZW5kaW5nIG1lc3NhZ2VzXG4gKi9cbmV4cG9ydCB0eXBlIENsaWVudEluZm8gPSB7XG4gIGlkOiBudW1iZXI7XG59XG5cbi8qKlxuICogQW4gb2JzZXJ2ZXIgYXNzb2NpYXRlZCB3aXRoIGEgc3BlY2lmaWMgdHlwZSBvZiBtZXNzYWdlXG4gKiBOb3RpZmllZCBvZiBpbmNvbWluZyBtZXNzYWdlcyBvZiB0eXBlIGBJbmNvbWluZ01lc3NhZ2VUeXBlYFxuICpcbiAqIEBwYXJhbSBJbmNvbWluZ01lc3NhZ2VUeXBlIFRoZSBtZXNzYWdlIHR5cGUgdG8gbGlzdGVuIGZvclxuICogQHBhcmFtIEluY29taW5nRGF0YU1hcFQgQSBtYXAgYmV0d2VlbiBJbmNvbWluZ01lc3NhZ2VUeXBlIGFuZCBkYXRhIHJlY2VpdmVkIGFuZCB1c2VkIHdpdGhpbiBgbm90aWZ5YFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElNZXNzYWdlT2JzZXJ2ZXI8XG4gIEluY29taW5nTWVzc2FnZVR5cGUgZXh0ZW5kcyBrZXlvZiBJbmNvbWluZ0RhdGFNYXBULFxuICBJbmNvbWluZ0RhdGFNYXBULFxuICBDbGllbnRJbmZvVCBleHRlbmRzIENsaWVudEluZm8gPSBDbGllbnRJbmZvLFxuPiB7XG4gIC8qKiBUaGUgbWVzc2FnZSB0eXBlIHRvIGxpc3RlbiBmb3IgKi9cbiAgcmVhZG9ubHkgbWVzc2FnZVR5cGU6IEluY29taW5nTWVzc2FnZVR5cGU7XG4gIC8qKiBBIGNhbGxiYWNrIGNhbGxlZCB3aGVuIGFuIElNZXNzYWdlIHJlY2VpdmVzIGFuIGBJbmNvbWluZ01lc3NhZ2VUeXBlYCBtZXNzYWdlICovXG4gIG5vdGlmeShwYXlsb2FkOiBJbmNvbWluZ0RhdGFNYXBUW0luY29taW5nTWVzc2FnZVR5cGVdLCBjbGllbnRJbmZvOiBDbGllbnRJbmZvVCwgc2VudEF0VGltZXN0YW1wOiBudW1iZXIpOiB2b2lkO1xufVxuXG4vKipcbiAqIEEgZmFjdG9yeSB0byBjcmVhdGUgSU1lc3NlbmdlcnNcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqIEBwYXJhbSBJbmNvbWluZ0RhdGFNYXBUIFRoZSBpbmNvbWluZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElNZXNzZW5nZXJGYWN0b3J5PE91dGdvaW5nRGF0YU1hcFQsSW5jb21pbmdEYXRhTWFwVD4ge1xuICAvKipcbiAgICogQ3JlYXRlIGFuIElNZXNzZW5nZXIgdGhhdCBjYW4gc2VuZCBgT3V0Z29pbmdEYXRhTWFwVGAgYW5kIGNhbiByZWNlaXZlIGBJbmNvbWluZ0RhdGFNYXBUYFxuICAgKi9cbiAgY3JlYXRlTWVzc2VuZ2VyKCk6IElNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD47XG59XG5cbi8qKlxuICogQSBiaS1kaXJlY3Rpb25hbCBjb21tdW5pY2F0b3IgdGhhdCBjYW5cbiAqIC0gcmVjZWl2ZSBtZXNzYWdlIG9mIHR5cGUgYGtleW9mIEluY29taW5nRGF0YU1hcFRgIHZpYSBvYnNlcnZlcnNcbiAqIC0gc2VuZCBtZXNzYWdlcyBvZiB0eXBlIGBrZXlvZiBPdXRnb2luZ0RhdGFNYXBUYFxuICpcbiAqIEBwYXJhbSBPdXRnb2luZ0RhdGFNYXBUIFRoZSBvdXRnb2luZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICogQHBhcmFtIEluY29taW5nRGF0YU1hcFQgVGhlIGluY29taW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkIGJ5IHJlZ2lzdGVyZWQgb2JzZXJ2ZXJzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSU1lc3NlbmdlcjxcbiAgT3V0Z29pbmdEYXRhTWFwVCxcbiAgSW5jb21pbmdEYXRhTWFwVCxcbj4ge1xuICAvKiogdGVhciBkb3duIHRoaXMgbWVzc2VuZ2VyICovXG4gIGluaXQoKTogdm9pZDtcbiAgLyoqIHRlYXIgZG93biB0aGlzIG1lc3NlbmdlciAqL1xuICBkaXNwb3NlKCk6IHZvaWQ7XG4gIC8qKiBSZWdpc3RlciBhbiBgb2JzZXJ2ZXJgIHRvIGxpc3RlbiBmb3IgaW5jb21pbmcgbWVzc2FnZXMgKi9cbiAgYWRkT2JzZXJ2ZXIob2JzZXJ2ZXI6IElNZXNzYWdlT2JzZXJ2ZXI8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+KTogdm9pZDtcbiAgLyoqIFJlbW92ZSBhbiBgb2JzZXJ2ZXJgIGZyb20gbGlzdGVuaW5nIHRvIGluY29taW5nIG1lc3NhZ2VzICovXG4gIHJlbW92ZU9ic2VydmVyKG9ic2VydmVyOiBJTWVzc2FnZU9ic2VydmVyPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPik6IHZvaWQ7XG4gIC8qKiBTZW5kIGEgYG1lc3NhZ2VgIHRvIHRoZSB0YXJnZXQgKi9cbiAgc2VuZChtZXNzYWdlOiBJTWVzc2FnZTxJbmRleEtleTxPdXRnb2luZ0RhdGFNYXBUPiwgT3V0Z29pbmdEYXRhTWFwVD4pOiB2b2lkO1xufVxuXG4vKipcbiAqIEEgYnJpZGdlIGJldHdlZW4gYSBtZXNzZW5nZXIgYW5kIHRoZSB1bmRlcmx5aW5nIG1lc3NlbmdpbmcgbWVjaGFuaXNtLCBhbGxvd2luZyB0aGUgbWVzc2VuZ2VyIHRvIGJlIG1vcmUgZ2VuZXJpY1xuICogVXNlZnVsIGluIGFic3RyYWN0aW5nIGF3YXkgc29tZXRoaW5nIGxpa2Ugd2luZG93LnBvc3RNZXNzYWdlIGZyb20gYW4gYElNZXNzZW5nZXJgXG4gKlxuICogQHBhcmFtIE91dGdvaW5nRGF0YU1hcFQgVGhlIG91dGdvaW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkXG4gKiBAcGFyYW0gSW5jb21pbmdEYXRhTWFwVCBUaGUgaW5jb21pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWQgYnkgcmVnaXN0ZXJlZCBvYnNlcnZlcnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJTWVzc2VuZ2VyQnJpZGdlPFxuICBPdXRnb2luZ0RhdGFNYXBULFxuICBJbmNvbWluZ0RhdGFNYXBULFxuPiB7XG4gIC8qKiBUdXJuIG9uIHRoZSBhYmlsaXR5IHRvIHJlY2VpdmUgbWVzc2FnZXMgZnJvbSBhbm90aGVyIGNsaWVudCAqL1xuICBsaXN0ZW4ob2JzZXJ2ZXI6IElPYnNlcnZlcjxbSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+LCBDbGllbnRJbmZvXT4pOiB2b2lkO1xuICAvKiogVHVybiBvZmYgdGhlIGFiaWxpdHkgdG8gcmVjZWl2ZSBtZXNzYWdlcyAqL1xuICBzdG9wTGlzdGVuaW5nKCk6IHZvaWQ7XG4gIC8qKiBTZW5kIG1lc3NhZ2UgdG8gdGhlIGFub3RoZXIgY2xpZW50ICovXG4gIHNlbmQobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4sIE91dGdvaW5nRGF0YU1hcFQ+KTogdm9pZDtcbn1cblxuLyoqXG4gKiBBIGJpLWRpcmVjdGlvbmFsIGNvbW11bmljYXRvciB0aGF0IGNhblxuICogLSBvcGVubHkgcmVjZWl2ZSBtZXNzYWdlcyBvZiB0eXBlIGBrZXlvZiBJbmNvbWluZ0RhdGFNYXBUYCB2aWEgb2JzZXJ2ZXJzIGZyb20gdW5zcGVjaWZpZWQgc291cmNlc1xuICogLSBzZW5kIG1lc3NhZ2VzIG9mIHR5cGUgYGtleW9mIE91dGdvaW5nRGF0YU1hcFRgIHRvIHRhcmdldHMgc3BlY2lmaWVkIHdoZW4gc2VuZGluZ1xuICpcbiAqIEBwYXJhbSBPdXRnb2luZ0RhdGFNYXBUIFRoZSBvdXRnb2luZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICogQHBhcmFtIEluY29taW5nRGF0YU1hcFQgVGhlIGluY29taW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkIGJ5IHJlZ2lzdGVyZWQgb2JzZXJ2ZXJzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVVuZGlyZWN0ZWRNZXNzZW5nZXI8XG4gIE91dGdvaW5nRGF0YU1hcFQsXG4gIEluY29taW5nRGF0YU1hcFQsXG4gIFNvdXJjZVQsXG4+IHtcbiAgLyoqIFJlZ2lzdGVyIGFuIGBvYnNlcnZlcmAgdG8gbGlzdGVuIGZvciBpbmNvbWluZyBtZXNzYWdlcyAqL1xuICBhZGRPYnNlcnZlcihvYnNlcnZlcjogSU1lc3NhZ2VPYnNlcnZlcjxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4pOiB2b2lkO1xuICAvKiogUmVtb3ZlIGFuIGBvYnNlcnZlcmAgZnJvbSBsaXN0ZW5pbmcgdG8gaW5jb21pbmcgbWVzc2FnZXMgKi9cbiAgcmVtb3ZlT2JzZXJ2ZXIob2JzZXJ2ZXI6IElNZXNzYWdlT2JzZXJ2ZXI8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+KTogdm9pZDtcbiAgLyoqIFNlbmQgYSBgbWVzc2FnZWAgdG8gdGhlIGB0YXJnZXRgICovXG4gIHNlbmQoXG4gICAgbWVzc2FnZTogSU1lc3NhZ2U8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4sIE91dGdvaW5nRGF0YU1hcFQ+LFxuICAgIHRhcmdldElkOiBudW1iZXIgfCB0eXBlb2YgQU5ZX1RBUkdFVCwgdGFyZ2V0OiBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlcjxPdXRnb2luZ0RhdGFNYXBULCBTb3VyY2VUPixcbiAgICBzb3VyY2U6IFNvdXJjZVQsXG4gICk6IHZvaWQ7XG4gIC8qKiBUZWFyIGRvd24gdGhpcyBtZXNzZW5nZXIgKi9cbiAgZGlzcG9zZSgpOiB2b2lkO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbCBpZCB0byBzeW1ib2xpemUgdGhlIG1lc3NhZ2Ugc2hvdWxkIGdvIHRvIGFsbCBvdGhlciBgSVVuZGlyZWN0ZWRMaXN0ZW5lcnNgLlxuICogRm9yIHVzZSB3aXRoIGBJVW5kaXJlY3RlZE1lc3NlbmdlcmAgYW5kIGBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlcmAuXG4gKi9cbmV4cG9ydCBjb25zdCBBTllfVEFSR0VUID0gLTE7XG5cbi8qKlxuICogQSBicmlkZ2UgYmV0d2VlbiBhIG1lc3NlbmdlciBhbmQgdGhlIHVuZGVybHlpbmcgbWVzc2FnZSByZWNlaXZpbmcgbWVjaGFuaXNtLCBhbGxvd2luZyB0aGUgbWVzc2VuZ2VyIHRvIGJlIG1vcmUgZ2VuZXJpY1xuICogVXNlZnVsIGluIGFic3RyYWN0aW5nIGF3YXkgc29tZXRoaW5nIGxpa2Ugd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgZnJvbSBhbiBgSU1lc3NlbmdlcmBcbiAqXG4gKiBAcGFyYW0gSW5jb21pbmdEYXRhTWFwVCBUaGUgaW5jb21pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWQgYnkgcmVnaXN0ZXJlZCBvYnNlcnZlcnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJVW5kaXJlY3RlZE1lc3Nlbmdlckxpc3RlbmVyPFxuICBJbmNvbWluZ0RhdGFNYXBULFxuPiB7XG4gIC8qKiBUdXJuIG9uIHRoZSBhYmlsaXR5IHRvIHJlY2VpdmUgbWVzc2FnZXMgZnJvbSBhbm90aGVyIGNsaWVudCAqL1xuICBsaXN0ZW4ob2JzZXJ2ZXI6IElPYnNlcnZlcjxbSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+LCBDbGllbnRJbmZvXT4pOiB2b2lkO1xuICAvKiogVHVybiBvZmYgdGhlIGFiaWxpdHkgdG8gcmVjZWl2ZSBtZXNzYWdlcyAqL1xuICBzdG9wTGlzdGVuaW5nKCk6IHZvaWQ7XG59XG5cbi8qKlxuICogQSBicmlkZ2UgYmV0d2VlbiBhIG1lc3NlbmdlciBhbmQgdGhlIHVuZGVybHlpbmcgbWVzc2FnZSBzZW5kaW5nIG1lY2hhbmlzbSwgYWxsb3dpbmcgdGhlIG1lc3NlbmdlciB0byBiZSBtb3JlIGdlbmVyaWNcbiAqIFVzZWZ1bCBpbiBhYnN0cmFjdGluZyBhd2F5IHNvbWV0aGluZyBsaWtlIHdpbmRvdy5wb3N0TWVzc2FnZSBmcm9tIGFuIGBJTWVzc2VuZ2VyYFxuICpcbiAqIEBwYXJhbSBPdXRnb2luZ0RhdGFNYXBUIFRoZSBvdXRnb2luZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElVbmRpcmVjdGVkTWVzc2VuZ2VyU2VuZGVyPFxuICBPdXRnb2luZ0RhdGFNYXBULFxuICBTb3VyY2VULFxuPiB7XG4gIC8qKiBTZW5kIG1lc3NhZ2UgdG8gdGhlIGNsaWVudCAqL1xuICBzZW5kKG1lc3NhZ2U6IElCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PE91dGdvaW5nRGF0YU1hcFQ+LCBPdXRnb2luZ0RhdGFNYXBUPiwgc291cmNlOiBTb3VyY2VUKTogdm9pZDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBkYXRhIGZvciBlYWNoIG1lc3NhZ2UgKGJvdGggb3V0Z29pbmcgYW5kIGluY29taW5nKVxuICpcbiAqIEBwYXJhbSBNZXNzYWdlVHlwZSBUaGUgdHlwZSBvZiB0aGUgbWVzc2FnZVxuICogQHBhcmFtIFBheWxvYWRNYXAgVGhlIG1hcCBiZXR3ZWVuIG1lc3NhZ2UgdHlwZXMgYW5kIHRoZWlyIHBheWxvYWRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSU1lc3NhZ2U8XG4gIE1lc3NhZ2VUeXBlIGV4dGVuZHMga2V5b2YgUGF5bG9hZE1hcFQsXG4gIFBheWxvYWRNYXBULFxuPiB7XG4gIC8qKiBUaGUgc3BlY2lmaWMgdHlwZSBvZiBtZXNzYWdlICovXG4gIHR5cGU6IE1lc3NhZ2VUeXBlO1xuICAvKiogVGhlIGRhdGEgdG8gc2VuZCAqL1xuICBwYXlsb2FkOiBQYXlsb2FkTWFwVFtNZXNzYWdlVHlwZV07XG59XG5cbi8qKlxuICogVGhlIGJhc2UgZGF0YSBmb3IgZWFjaCBsb3dlciBsZXZlbCBtZXNzYWdlIHR5cGVzIGJlaW5nIHJlY2VpdmVkIGJ5IHRoZSBicmlkZ2VzXG4gKlxuICogQHBhcmFtIE1lc3NhZ2VUeXBlIFRoZSB0eXBlIG9mIHRoZSBtZXNzYWdlXG4gKiBAcGFyYW0gUGF5bG9hZE1hcCBUaGUgbWFwIGJldHdlZW4gbWVzc2FnZSB0eXBlcyBhbmQgdGhlaXIgcGF5bG9hZHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQnJpZGdlTWVzc2FnZTxcbiAgTWVzc2FnZVR5cGUgZXh0ZW5kcyBrZXlvZiBQYXlsb2FkTWFwVCxcbiAgUGF5bG9hZE1hcFQsXG4+IHtcbiAgLyoqIFRoZSBzcGVjaWZpYyB0eXBlIG9mIG1lc3NhZ2UgKi9cbiAgdHlwZTogTWVzc2FnZVR5cGU7XG4gIC8qKiBUaGUgZGF0YSByZWNlaXZlZCAqL1xuICBwYXlsb2FkOiBQYXlsb2FkTWFwVFtNZXNzYWdlVHlwZV07XG4gIC8qKiBUaGUgdGltZXN0YW1wIG9mIHdoZW4gdGhlIG1lc3NhZ2Ugd2FzIHNlbnQgKi9cbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIC8qKiBUaGUgaWQgb2YgdGhlIGNsaWVudCBzZW5kaW5nIHRoZSBtZXNzYWdlICovXG4gIGZyb21JZDogbnVtYmVyO1xuICAvKiogVGhlIGlkIG9mIHRoZSBjbGllbnQgdGhhdCBzaG91bGQgcmVjZWl2ZSB0aGlzIG1lc3NhZ2UgKi9cbiAgdG9JZDogbnVtYmVyIHwgbnVtYmVyW107XG59XG4iLCJpbXBvcnQgeyBQb3N0TWVzc2FnZUZhY3RvcnksIFBvc3RNZXNzYWdlTGlzdGVuZXIsIFBvc3RNZXNzYWdlU2VuZGVyLCBVbmRpcmVjdGVkTWVzc2VuZ2VyIH0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB0eXBlIHtcbiAgSVNka0Nvbm5lY3Rvcn0gZnJvbSAnLi9NUF9TREsnO1xuaW1wb3J0IHtcbiAgTVBfU0RLLFxufSBmcm9tICcuL01QX1NESyc7XG5pbXBvcnQgdHlwZSB7IENvbm5lY3RSZXNwb25zZSB9IGZyb20gJy4vQ29ubmVjdG9yJztcbmltcG9ydCB7IENvbm5lY3RvciB9IGZyb20gJy4vQ29ubmVjdG9yJztcbmltcG9ydCB0eXBlIHsgSW5jb21pbmdEYXRhTWFwLCBPdXRnb2luZ0RhdGFNYXAgfSBmcm9tICcuL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgdHlwZSB7IE1wU2RrLCBDb25uZWN0T3B0aW9ucyB9IGZyb20gJ0BzZGsvdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgdmVyc2lvbiA9ICczLjAnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdCh0YXJnZXRXaW5kb3c6IEhUTUxJRnJhbWVFbGVtZW50LCBvcHRpb25zOiBQYXJ0aWFsPENvbm5lY3RPcHRpb25zPiA9IHt9KTogUHJvbWlzZTxNcFNkaz4ge1xuICBjb25zdCB0YXJnZXQgPSBnZXRXaW5kb3codGFyZ2V0V2luZG93KTtcbiAgaWYgKCF0YXJnZXQpIHJldHVybiBQcm9taXNlLnJlamVjdCgnaW52YWxpZCB3aW5kb3cnKTtcblxuICAvLyBjcmVhdGUgYSB3YXkgdG8gY3JlYXRlIGNvbW11bmljYXRpb24gY2hhbm5lbHMgKElNZXNzYWdlKSBhbmQgc2V0IHVwIGEgUG9zdE1lc3NhZ2UgdG8gdXNlIGZvciBjb25uZWN0aW5nXG4gIGNvbnN0IHNvdXJjZUlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCk7IC8vIGEgdGVtcCBpZCB0byB1c2Ugd2hpbGUgY29ubmVjdGluZ1xuICBjb25zdCBwb3N0TWVzc2FnZUxpc3RlbmVyID0gbmV3IFBvc3RNZXNzYWdlTGlzdGVuZXI8SW5jb21pbmdEYXRhTWFwPih3aW5kb3cpO1xuICBjb25zdCBwb3N0TWVzYWdlU2VuZGVyID0gbmV3IFBvc3RNZXNzYWdlU2VuZGVyPE91dGdvaW5nRGF0YU1hcD4odGFyZ2V0KTtcbiAgY29uc3QgcG9zdE1lc3NhZ2UgPSBuZXcgVW5kaXJlY3RlZE1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXAsIEluY29taW5nRGF0YU1hcCwgV2luZG93Pihzb3VyY2VJZCwgcG9zdE1lc3NhZ2VMaXN0ZW5lcik7XG4gIHBvc3RNZXNzYWdlLmluaXQoKTtcblxuICAvLyBjb25uZWN0XG4gIGNvbnN0IGNvbm5lY3RvciA9IG5ldyBDb25uZWN0b3I8V2luZG93Pihwb3N0TWVzc2FnZSwgcG9zdE1lc2FnZVNlbmRlciwgd2luZG93KTtcbiAgcmV0dXJuIE1QX1NESy5jb25uZWN0KG5ldyBFbWJlZENvbm5lY3Rvcihjb25uZWN0b3IsIHBvc3RNZXNzYWdlLCBvcHRpb25zKSwgbmV3IEVtYmVkTWVzc2VuZ2VyRmFjdG9yeUZldGNoZXIodGFyZ2V0KSwgd2luZG93KTtcbn1cblxuZnVuY3Rpb24gZ2V0V2luZG93KGVsZW1lbnQ6IEhUTUxJRnJhbWVFbGVtZW50KTogV2luZG93IHwgbnVsbCB7XG4gIGlmIChlbGVtZW50LmNvbnRlbnRXaW5kb3cpIHJldHVybiBlbGVtZW50LmNvbnRlbnRXaW5kb3c7XG4gIHJldHVybiBudWxsO1xufVxuXG5jbGFzcyBFbWJlZENvbm5lY3RvciBpbXBsZW1lbnRzIElTZGtDb25uZWN0b3I8Q29ubmVjdFJlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY29ubmVjdG9yOiBDb25uZWN0b3I8V2luZG93PixcbiAgICBwcml2YXRlIHBvc3RNZXNzYWdlOiBVbmRpcmVjdGVkTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcCwgSW5jb21pbmdEYXRhTWFwLCBXaW5kb3c+LFxuICAgIHByaXZhdGUgb3B0aW9uczogUGFydGlhbDxDb25uZWN0T3B0aW9ucz4sXG4gICkge31cbiAgcHVibGljIGNvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdG9yLmNvbm5lY3QodmVyc2lvbiwgdGhpcy5vcHRpb25zKTtcbiAgfVxuXG4gIHB1YmxpYyBjYW5jZWxDb25uZWN0aW5nKCkge1xuICAgIHRoaXMucG9zdE1lc3NhZ2UuZGlzcG9zZSgpO1xuICB9XG59XG5cbmNsYXNzIEVtYmVkTWVzc2VuZ2VyRmFjdG9yeUZldGNoZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRhcmdldDogV2luZG93KSB7fVxuICBwdWJsaWMgZ2V0RmFjdG9yeShjb25uZWN0UmVzcG9uc2U6IENvbm5lY3RSZXNwb25zZSkge1xuICAgIHJldHVybiBuZXcgUG9zdE1lc3NhZ2VGYWN0b3J5KGNvbm5lY3RSZXNwb25zZS5zb3VyY2VJZCwgd2luZG93LCBjb25uZWN0UmVzcG9uc2UudGFyZ2V0SWQsIHRoaXMudGFyZ2V0LCBjb25uZWN0UmVzcG9uc2UudGFyZ2V0T3JpZ2luKTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBJTWVzc2FnZSB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IEhhbmRzaGFrZVBheWxvYWQsIEluY29taW5nRGF0YU1hcH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcbmltcG9ydCB7IEluY29taW5nTWVzc2FnZVR5cGUgfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgSGFuZHNoYWtlTWVzc2FnZSBpbXBsZW1lbnRzIElNZXNzYWdlPEluY29taW5nTWVzc2FnZVR5cGUuSEFORFNIQUtFLCBJbmNvbWluZ0RhdGFNYXA+IHtcbiAgcHVibGljIHJlYWRvbmx5IHR5cGUgPSBJbmNvbWluZ01lc3NhZ2VUeXBlLkhBTkRTSEFLRTtcbiAgcHVibGljIHJlYWRvbmx5IHBheWxvYWQ6IEhhbmRzaGFrZVBheWxvYWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wYXlsb2FkID0ge307XG4gIH1cbn1cbiIsImltcG9ydCB0eXBlIHsgSU1lc3NhZ2UgfSBmcm9tICdAc2RrL21lc3NlbmdlcnMnO1xuaW1wb3J0IHR5cGUgeyBBY2NlcHRQYXlsb2FkLCBJbmNvbWluZ0RhdGFNYXB9IGZyb20gJy4uL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgeyBJbmNvbWluZ01lc3NhZ2VUeXBlIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcblxuZXhwb3J0IGNsYXNzIEFjY2VwdE1lc3NhZ2UgaW1wbGVtZW50cyBJTWVzc2FnZTxJbmNvbWluZ01lc3NhZ2VUeXBlLkFDQ0VQVCwgSW5jb21pbmdEYXRhTWFwPiB7XG4gIHB1YmxpYyByZWFkb25seSB0eXBlID0gSW5jb21pbmdNZXNzYWdlVHlwZS5BQ0NFUFQ7XG4gIHB1YmxpYyByZWFkb25seSBwYXlsb2FkOiBBY2NlcHRQYXlsb2FkO1xuXG4gIC8vIFRPT0QgKHNkayAxLnggc3VwcG9ydCk6IFNESyBib290c3RyYXAgMS54IGV4cGVjdHMgdGhlIGBpbnRlcmZhY2VgIHRvIGJlIGF0IHRoZSByb290IG9mIHRoZSBtZXNzYWdlc1xuICBwdWJsaWMgaW50ZXJmYWNlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuICBjb25zdHJ1Y3RvcihzY3JpcHRVcmw6IHN0cmluZywgY2xpZW50SW50ZXJmYWNlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgc291cmNlSWQ6IG51bWJlciwgdGFyZ2V0SWQ6IG51bWJlciwgdGFyZ2V0T3JpZ2luOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBheWxvYWQgPSB7XG4gICAgICBzY3JpcHRVcmwsXG4gICAgICBpbnRlcmZhY2U6IGNsaWVudEludGVyZmFjZSxcbiAgICAgIHNvdXJjZUlkLFxuICAgICAgdGFyZ2V0SWQsXG4gICAgICB0YXJnZXRPcmlnaW4sXG4gICAgfTtcbiAgICB0aGlzLmludGVyZmFjZSA9IGNsaWVudEludGVyZmFjZTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBJTWVzc2FnZSB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IFNka0Nvbm5lY3RFcnJvciB9IGZyb20gJy4uL0Vycm9ycyc7XG5pbXBvcnQgdHlwZSB7IEluY29taW5nRGF0YU1hcCwgUmVqZWN0UGF5bG9hZCB9IGZyb20gJy4uL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgeyBJbmNvbWluZ01lc3NhZ2VUeXBlIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcblxuZXhwb3J0IGNsYXNzIFJlamVjdE1lc3NhZ2UgaW1wbGVtZW50cyBJTWVzc2FnZTxJbmNvbWluZ01lc3NhZ2VUeXBlLlJFSkVDVCwgSW5jb21pbmdEYXRhTWFwPiB7XG4gIHB1YmxpYyByZWFkb25seSB0eXBlID0gSW5jb21pbmdNZXNzYWdlVHlwZS5SRUpFQ1Q7XG4gIHB1YmxpYyByZWFkb25seSBwYXlsb2FkOiBSZWplY3RQYXlsb2FkO1xuXG4gIC8vIFRPT0QgKHNkayAxLnggc3VwcG9ydCk6IFNESyBib290c3RyYXAgMS54IGV4cGVjdHMgdGhlIGByZWFzb25gIHRvIGJlIGF0IHRoZSByb290IG9mIHRoZSBtZXNzYWdlc1xuICBwdWJsaWMgcmVhc29uOiBzdHJpbmc7XG4gIGNvbnN0cnVjdG9yKGVycm9yOiBTZGtDb25uZWN0RXJyb3IpIHtcbiAgICB0aGlzLnBheWxvYWQgPSB7XG4gICAgICByZWFzb246IGVycm9yLm1lc3NhZ2UsXG4gICAgICBlcnJvclR5cGU6IGVycm9yLnR5cGUsXG4gICAgfTtcbiAgICB0aGlzLnJlYXNvbiA9IGVycm9yLm1lc3NhZ2U7XG4gIH1cbn1cbiIsImltcG9ydCB0eXBlIHsgQ2xpZW50SW5mbywgSU1lc3NhZ2VPYnNlcnZlciB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IE91dGdvaW5nRGF0YU1hcCwgQ29ubmVjdFBheWxvYWQgfSBmcm9tICdAc2RrL2Jvb3RzdHJhcCc7XG5pbXBvcnQgeyBPdXRnb2luZ01lc3NhZ2VUeXBlIH0gZnJvbSAnQHNkay9ib290c3RyYXAnO1xuXG4vKipcbiAqIEFuIG9ic2VydmVyIHRoYXQgcmVjZWl2ZXMgYENvbm5lY3RQYXlsb2FkYCBvYmplY3RzIGluIGl0cyBgb25Db25uZWN0aW9uUmVjZWl2ZWRgIGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbm5lY3RPYnNlcnZlcjxUIGV4dGVuZHMgQ2xpZW50SW5mbz4ge1xuICBvbkNvbm5lY3Rpb25SZWNlaXZlZChjb25uZWN0OiBDb25uZWN0UGF5bG9hZCwgY2xpZW50SW5mbzogVCk6IHZvaWQ7XG59XG5cbi8qKlxuICogQW4gYWRhcHRvciB0byBtYWtlIGFuIGBJQ29ubmVjdE9ic2VydmVyYCBsb29rIGxpa2UgYW4gYElNZXNzYWdlT2JzZXJ2ZXJgICh3aXRoIGEgYG5vdGlmeWAgZnVuY3Rpb24pXG4gKiBDYWxscyB0aGUgaW5wdXQgb2JqZWN0J3MgYG9uQ29ubmVjdGlvblJlY2VpdmVkYCB3aGVuIGEgYENPTk5FQ1RgIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgb24gdGhlIGBJTWVzc2VuZ2VyYCB0aGlzIGlzIHJlZ2lzdGVyZWQgd2l0aC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbm5lY3RNZXNzYWdlT2JzZXJ2ZXI8VCBleHRlbmRzIENsaWVudEluZm8+IGltcGxlbWVudHMgSU1lc3NhZ2VPYnNlcnZlcjxPdXRnb2luZ01lc3NhZ2VUeXBlLkNPTk5FQ1QsIE91dGdvaW5nRGF0YU1hcCwgVD4ge1xuICBwdWJsaWMgcmVhZG9ubHkgbWVzc2FnZVR5cGUgPSBPdXRnb2luZ01lc3NhZ2VUeXBlLkNPTk5FQ1Q7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVjZWl2ZXI6IElDb25uZWN0T2JzZXJ2ZXI8VD4pIHt9XG5cbiAgcHVibGljIG5vdGlmeShjb25uZWN0OiBDb25uZWN0UGF5bG9hZCwgY2xpZW50SW5mbzogVCk6IHZvaWQge1xuICAgIHRoaXMucmVjZWl2ZXIub25Db25uZWN0aW9uUmVjZWl2ZWQoY29ubmVjdCwgY2xpZW50SW5mbyk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=